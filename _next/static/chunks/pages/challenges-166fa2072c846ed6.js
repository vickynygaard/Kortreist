(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{6309:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(7876),s=r(4232),o=r(9099),n=r(300),l=r(6955),i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function c(e){var t,r,a,o,n,l,i,c,u=e.className,d=e.counterClockwise,h=e.dashRatio,p=e.pathRadius,f=e.strokeWidth,m=e.style;return(0,s.createElement)("path",{className:u,style:Object.assign({},m,(r=(t={pathRadius:p,dashRatio:h,counterClockwise:d}).counterClockwise,a=t.dashRatio,n=(1-a)*(o=2*Math.PI*t.pathRadius),{strokeDasharray:o+"px "+o+"px",strokeDashoffset:(r?-n:n)+"px"})),d:(i=(l={pathRadius:p,counterClockwise:d}).pathRadius,"\n      M 50,50\n      m 0,-"+i+"\n      a "+i+","+i+" "+(c=+!!l.counterClockwise)+" 1 1 0,"+2*i+"\n      a "+i+","+i+" "+c+" 1 1 0,-"+2*i+"\n    "),strokeWidth:f,fillOpacity:0})}var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return!function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,r=e.minValue,a=e.maxValue;return(Math.min(Math.max(t,r),a)-r)/(a-r)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,r=e.className,a=e.classes,o=e.counterClockwise,n=e.styles,l=e.strokeWidth,i=e.text,u=this.getPathRadius(),d=this.getPathRatio();return(0,s.createElement)("svg",{className:a.root+" "+r,style:n.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,s.createElement)("circle",{className:a.background,style:n.background,cx:50,cy:50,r:50}):null,(0,s.createElement)(c,{className:a.trail,counterClockwise:o,dashRatio:t,pathRadius:u,strokeWidth:l,style:n.trail}),(0,s.createElement)(c,{className:a.path,counterClockwise:o,dashRatio:d*t,pathRadius:u,strokeWidth:l,style:n.path}),i?(0,s.createElement)("text",{className:a.text,style:n.text,x:50,y:50},i):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(s.Component);function d(e){return Object.keys(e).forEach(function(t){null==e[t]&&delete e[t]}),e}r(7116);let h=e=>{let{title:t,type:r,current:s,total:o,challengeType:n}=e,l=Math.min(s/o*100,100),i=s>=o,c="Distance"===n?"".concat(s.toFixed(1)," km\n/ ").concat(o," km"):"".concat(s,"/").concat(o);return(0,a.jsxs)("div",{className:"grid bg-customYellow2 w-full max-h-40 grid-cols-3 grid-rows-2 gap-2 rounded-xl border-2 border-violet-900 p-4",children:[(0,a.jsx)("div",{className:"col-span-2 self-start font-mono font-bold text-lg p-2",children:t}),(0,a.jsx)("div",{className:"row-span-2 flex items-center justify-center pl-4",children:(0,a.jsx)("div",{className:"w-flex max-h-32 max-w-32 font-mono",children:(0,a.jsxs)("div",{className:"relative w-28 h-28",children:[(0,a.jsx)(u,{value:l,styles:function(e){var t=e.rotation,r=e.strokeLinecap,a=e.textColor,s=e.textSize,o=e.pathColor,n=e.pathTransition,l=e.pathTransitionDuration,i=e.trailColor,c=e.backgroundColor,u=null==t?void 0:"rotate("+t+"turn)",h=null==t?void 0:"center center";return{root:{},path:d({stroke:o,strokeLinecap:r,transform:u,transformOrigin:h,transition:n,transitionDuration:null==l?void 0:l+"s"}),trail:d({stroke:i,strokeLinecap:r,transform:u,transformOrigin:h}),text:d({fill:a,fontSize:s}),background:d({fill:c})}}({strokeLinecap:"round",textSize:"14px",pathColor:"#2F0D68",textColor:"#1f2937",trailColor:"#d1d5db"})}),(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-mono text-gray-800 leading-tight",children:"Distance"===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg",children:"".concat(s.toFixed(1),"km")}),(0,a.jsx)("span",{className:"text-base",children:"/ ".concat(o,"km")})]}):(0,a.jsx)("span",{className:"text-base",children:"".concat(s,"/").concat(o)})})]})})}),(0,a.jsxs)("div",{className:"col-span-2 self-start flex flex-col pl-4",children:[(0,a.jsx)("div",{className:"font-mono",children:(0,a.jsx)("strong",{children:c})}),(0,a.jsx)("div",{children:i?"Fullf\xf8rt":"P\xe5g\xe5r"})]})]})};var p=r(3546);let f=()=>{let e=(0,o.useRouter)(),{userData:t}=(0,n.r)(),{profile:r,loading:i,error:c}=(0,p.s)(),[u,d]=(0,s.useState)([]),[f,m]=(0,s.useState)(null),x=async()=>{if(!(null==t?void 0:t.accessToken))return;let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/current/user",{headers:{Authorization:"Bearer ".concat(t.accessToken)}});if(e.ok){let t=await e.json();console.log("Fetched challenges:",t),d(t)}else console.error("Failed to fetch challenges:",e.status)};(0,s.useEffect)(()=>{x()},[null==t?void 0:t.accessToken]);let g=async e=>{m(e);let r=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/custom/complete",{method:"POST",headers:{Authorization:"Bearer ".concat(null==t?void 0:t.accessToken),"Content-Type":"application/json"},body:JSON.stringify({challengeId:e})});r.ok?await x():console.error("Could not submit custom challenge:",await r.text()),m(null)};return(0,a.jsxs)("div",{className:"flex flex-col items-center p-4 gap-4",children:[(0,a.jsx)("header",{className:"self-start",children:(0,a.jsx)(l.A,{onClick:()=>e.back()})}),(0,a.jsx)("div",{className:"flex justify-center w-full font-bold font-mono text-3xl text-violet-950 pb-6",children:"Ukens utfordringer"}),u.map(e=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(h,{title:e.description,type:e.method,current:Math.min(e.userProgress,"Distance"===e.type?e.requiredDistanceKm:e.requiredCount),total:"Distance"===e.type?e.requiredDistanceKm:e.requiredCount,challengeType:e.type}),"custom"===e.method&&void 0!==e.requiredCount&&e.userProgress<e.requiredCount&&(0,a.jsx)("button",{disabled:f===e.challengeId,className:"mt-2 px-4 py-2 rounded bg-violet-700 text-white hover:bg-violet-800",onClick:()=>g(e.challengeId),children:f===e.challengeId?"Registrerer...":"Fullf\xf8r aktivitet"})]},e.challengeId))]})}},6620:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges",function(){return r(6309)}])},6955:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(7876);let s=(0,r(1713).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=e=>{let{icon:t=(0,a.jsx)(s,{size:24}),onClick:r}=e;return(0,a.jsx)("button",{onClick:r,className:"flex items-center",children:t})}},7116:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6620)),_N_E=e.O()}]);