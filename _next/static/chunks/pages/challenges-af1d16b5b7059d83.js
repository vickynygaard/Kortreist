(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{3784:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var s=r(7596),n=r(9099),a=r.n(n),l=r(7685);async function o(e,t){let r={"Content-Type":"application/json"};t&&(r.Authorization="Bearer ".concat(t));let s=await fetch("".concat("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net").concat(e),{headers:r});if(!s.ok){if(428===s.status){l.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),a().push("/onboarding");return}let e=await s.text();throw Error("Error: ".concat(s.statusText," - ").concat(e))}return s.json()}function i(e,t,r){var n;let a=(null===(n=null==r?void 0:r.enabled)||void 0===n||n)&&e&&t?[e,t]:null,{data:l,error:i,mutate:c}=(0,s.Ay)(a,()=>o(e,t),r);return{data:l,isLoading:!l&&!i,error:i,mutate:c}}},4842:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(7876);function n(e){let{message:t,onConfirm:r,onCancel:n,confirmColor:a="green"}=e;return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-80 text-center",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-black",children:t}),(0,s.jsxs)("div",{className:"mt-4 flex justify-center gap-4",children:[(0,s.jsx)("button",{onClick:r,className:"red"===a?"px-4 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition":"px-4 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition",children:"Bekreft"}),(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-300 text-black rounded-full hover:bg-gray-400 transition",children:"Avbryt"})]})]})})}r(4232)},6309:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(7876),n=r(4232),a=r(9099),l=r(300),o=r(6955),i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function c(e){var t,r,s,a,l,o,i,c,d=e.className,u=e.counterClockwise,h=e.dashRatio,p=e.pathRadius,x=e.strokeWidth,f=e.style;return(0,n.createElement)("path",{className:d,style:Object.assign({},f,(r=(t={pathRadius:p,dashRatio:h,counterClockwise:u}).counterClockwise,s=t.dashRatio,l=(1-s)*(a=2*Math.PI*t.pathRadius),{strokeDasharray:a+"px "+a+"px",strokeDashoffset:(r?-l:l)+"px"})),d:(i=(o={pathRadius:p,counterClockwise:u}).pathRadius,"\n      M 50,50\n      m 0,-"+i+"\n      a "+i+","+i+" "+(c=+!!o.counterClockwise)+" 1 1 0,"+2*i+"\n      a "+i+","+i+" "+c+" 1 1 0,-"+2*i+"\n    "),strokeWidth:x,fillOpacity:0})}var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return!function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,r=e.minValue,s=e.maxValue;return(Math.min(Math.max(t,r),s)-r)/(s-r)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,r=e.className,s=e.classes,a=e.counterClockwise,l=e.styles,o=e.strokeWidth,i=e.text,d=this.getPathRadius(),u=this.getPathRatio();return(0,n.createElement)("svg",{className:s.root+" "+r,style:l.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,n.createElement)("circle",{className:s.background,style:l.background,cx:50,cy:50,r:50}):null,(0,n.createElement)(c,{className:s.trail,counterClockwise:a,dashRatio:t,pathRadius:d,strokeWidth:o,style:l.trail}),(0,n.createElement)(c,{className:s.path,counterClockwise:a,dashRatio:u*t,pathRadius:d,strokeWidth:o,style:l.path}),i?(0,n.createElement)("text",{className:s.text,style:l.text,x:50,y:50},i):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(n.Component);function u(e){return Object.keys(e).forEach(function(t){null==e[t]&&delete e[t]}),e}r(7116);let h=e=>{let{title:t,type:r,current:n,total:a,challengeType:l,challengePoints:o}=e,i=Math.min(n/a*100,100),c=n>=a,h="Distance"===l?"".concat(n.toFixed(1)," km\n/ ").concat(a," km"):"".concat(n,"/").concat(a);return(0,s.jsxs)("div",{className:"grid bg-customYellow2 w-full max-h-40 grid-cols-3 grid-rows-2 gap-2 rounded-xl border-2 border-violet-900 p-4",children:[(0,s.jsx)("div",{className:"col-span-2 self-start font-bold text-lg p-2",children:t}),(0,s.jsxs)("div",{className:"row-span-2 flex flex-col items-center justify-center pl-4",children:[(0,s.jsxs)("div",{className:"relative w-24 h-24",children:[(0,s.jsx)(d,{value:i,styles:function(e){var t=e.rotation,r=e.strokeLinecap,s=e.textColor,n=e.textSize,a=e.pathColor,l=e.pathTransition,o=e.pathTransitionDuration,i=e.trailColor,c=e.backgroundColor,d=null==t?void 0:"rotate("+t+"turn)",h=null==t?void 0:"center center";return{root:{},path:u({stroke:a,strokeLinecap:r,transform:d,transformOrigin:h,transition:l,transitionDuration:null==o?void 0:o+"s"}),trail:u({stroke:i,strokeLinecap:r,transform:d,transformOrigin:h}),text:u({fill:s,fontSize:n}),background:u({fill:c})}}({strokeLinecap:"round",textSize:"14px",pathColor:"#2F0D68",textColor:"#1f2937",trailColor:"#d1d5db"})}),(0,s.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs text-gray-800 leading-tight",children:"Distance"===l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-base",children:"".concat(n.toFixed(1),"km")}),(0,s.jsx)("span",{className:"text-sm",children:"/ ".concat(a,"km")})]}):(0,s.jsx)("span",{className:"text-base",children:"".concat(n,"/").concat(a)})})]}),c?(0,s.jsxs)("div",{className:"mt-2 bg-customGreen text-white text-xs font-bold px-2 py-1 rounded",children:[" ",o," poeng"]}):(0,s.jsxs)("div",{className:"mt-2 bg-customViolet text-white text-xs font-bold px-2 py-1 rounded",children:[" ",o," poeng"]})]}),(0,s.jsxs)("div",{className:"col-span-2 self-start flex flex-col pl-4",children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)("strong",{children:h})}),(0,s.jsx)("div",{children:c?"Fullf\xf8rt":"P\xe5g\xe5r"})]})]})};var p=r(7644),x=r(3784),f=r(4842);let m=()=>{let e=(0,a.useRouter)(),{userData:t}=(0,l.r)(),{data:r,isLoading:i,error:c,mutate:d}=(0,x.g)("/api/challenge/current/user",null==t?void 0:t.accessToken,{refreshInterval:3e4,enabled:!!(null==t?void 0:t.accessToken)}),[u,m]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),k=async e=>{m(e);let r=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/custom/complete",{method:"POST",headers:{Authorization:"Bearer ".concat(null==t?void 0:t.accessToken),"Content-Type":"application/json"},body:JSON.stringify({challengeId:e})});if(r.ok||console.log("Error completing custom challenge:",r),!r.ok)return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});await d(),m(null)};return i?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(p.A,{})}):c?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})}):(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 gap-4",children:[(0,s.jsx)("header",{className:"self-start",children:(0,s.jsx)(o.A,{onClick:()=>e.back()})}),(0,s.jsx)("div",{className:"flex justify-center w-full font-bold font-mono text-3xl text-violet-950 pb-6",children:"Ukens utfordringer"}),null==r?void 0:r.map(e=>(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(h,{title:e.description,type:e.method,current:Math.min(e.userProgress,"Distance"===e.type?e.requiredDistanceKm:e.requiredCount),total:"Distance"===e.type?e.requiredDistanceKm:e.requiredCount,challengeType:e.type,challengePoints:e.points}),"custom"===e.method&&void 0!==e.requiredCount&&e.userProgress<e.requiredCount&&(0,s.jsx)("button",{disabled:u===e.challengeId,className:"mt-2 px-4 py-2 rounded bg-violet-700 text-white hover:bg-violet-800",onClick:()=>b(e.challengeId),children:u===e.challengeId?"Registrerer...":"Fullf\xf8r aktivitet"})]},e.challengeId)),null!==g&&(0,s.jsx)(f.A,{message:"Er du sikker p\xe5 at du vil fullf\xf8re denne aktiviteten?",onConfirm:()=>{k(g),b(null)},onCancel:()=>b(null),confirmColor:"green"})]})}},6620:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges",function(){return r(6309)}])},6955:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(7876);let n=(0,r(1713).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),a=e=>{let{icon:t=(0,s.jsx)(n,{size:24}),onClick:r}=e;return(0,s.jsx)("button",{onClick:r,className:"flex items-center",children:t})}},7116:()=>{},7644:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(7876);function n(){return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-customViolet"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[596,636,593,792],()=>t(6620)),_N_E=e.O()}]);