(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{3784:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var r=s(7596),a=s(9099),n=s.n(a),i=s(7685);async function l(e,t){let s={"Content-Type":"application/json"};t&&(s.Authorization="Bearer ".concat(t));let r=await fetch("".concat("https://kortreistapi-h7e9d7gsb3bcgwhd.norwayeast-01.azurewebsites.net").concat(e),{headers:s});if(!r.ok){if(428===r.status){i.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),n().push("/onboarding");return}let e=await r.text();throw Error("Error: ".concat(r.statusText," - ").concat(e))}return r.json()}function o(e,t,s){var a;let n=(null===(a=null==s?void 0:s.enabled)||void 0===a||a)&&e&&t?[e,t]:null,{data:i,error:o,mutate:c}=(0,r.Ay)(n,()=>l(e,t),s);return{data:i,isLoading:!i&&!o,error:o,mutate:c}}},4842:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(7876);function a(e){let{message:t,onConfirm:s,onCancel:a,confirmColor:n="green"}=e;return(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-80 text-center",children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-black",children:t}),(0,r.jsxs)("div",{className:"mt-4 flex justify-center gap-4",children:[(0,r.jsx)("button",{onClick:s,className:"red"===n?"px-4 py-2 bg-customRed text-white rounded-full hover:bg-red-600 transition":"px-4 py-2 bg-customGreen text-white rounded-full hover:bg-green-600 transition",children:"Bekreft"}),(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-300 text-black rounded-full hover:bg-gray-400 transition",children:"Avbryt"})]})]})})}s(4232)},6309:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(7876),a=s(4232),n=s(9099),i=s(300),l=s(6955),o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)};function c(e){var t,s,r,n,i,l,o,c,d=e.className,u=e.counterClockwise,h=e.dashRatio,p=e.pathRadius,m=e.strokeWidth,x=e.style;return(0,a.createElement)("path",{className:d,style:Object.assign({},x,(s=(t={pathRadius:p,dashRatio:h,counterClockwise:u}).counterClockwise,r=t.dashRatio,i=(1-r)*(n=2*Math.PI*t.pathRadius),{strokeDasharray:n+"px "+n+"px",strokeDashoffset:(s?-i:i)+"px"})),d:(o=(l={pathRadius:p,counterClockwise:u}).pathRadius,"\n      M 50,50\n      m 0,-"+o+"\n      a "+o+","+o+" "+(c=+!!l.counterClockwise)+" 1 1 0,"+2*o+"\n      a "+o+","+o+" "+c+" 1 1 0,-"+2*o+"\n    "),strokeWidth:m,fillOpacity:0})}var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return!function(e,t){function s(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,s=e.minValue,r=e.maxValue;return(Math.min(Math.max(t,s),r)-s)/(r-s)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,s=e.className,r=e.classes,n=e.counterClockwise,i=e.styles,l=e.strokeWidth,o=e.text,d=this.getPathRadius(),u=this.getPathRatio();return(0,a.createElement)("svg",{className:r.root+" "+s,style:i.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,a.createElement)("circle",{className:r.background,style:i.background,cx:50,cy:50,r:50}):null,(0,a.createElement)(c,{className:r.trail,counterClockwise:n,dashRatio:t,pathRadius:d,strokeWidth:l,style:i.trail}),(0,a.createElement)(c,{className:r.path,counterClockwise:n,dashRatio:u*t,pathRadius:d,strokeWidth:l,style:i.path}),o?(0,a.createElement)("text",{className:r.text,style:i.text,x:50,y:50},o):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(a.Component);function u(e){return Object.keys(e).forEach(function(t){null==e[t]&&delete e[t]}),e}s(7116);let h=e=>{let{title:t,type:s,current:a,total:n,challengeType:i,challengePoints:l,isCustom:o,isCompleted:c,onComplete:h,isLoading:p}=e,m=Math.min(a/n*100,100),x="Distance"===i?"".concat(a.toFixed(1)," km\n/ ").concat(n," km"):"".concat(a,"/").concat(n);return(0,r.jsxs)("div",{className:"relative flex bg-customYellow2 w-full rounded-xl border-2 p-4 gap-4 ".concat("Custom"===i?"border-orange-500":"Distance"===i?"border-green-500":"border-blue-500"),children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-lg mb-1",children:t}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)("strong",{children:x})}),(0,r.jsx)("div",{className:"text-sm",children:c?"Fullf\xf8rt":"P\xe5g\xe5r"})]}),o&&!c&&h&&(0,r.jsx)("button",{onClick:h,disabled:p,className:"mt-2 w-fit px-3 py-1 text-xs bg-orange-500 text-white rounded transition-opacity hover:opacity-80 active:opacity-60 disabled:opacity-50",children:p?"Registrerer...":"Fullf\xf8r aktivitet"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsxs)("div",{className:"relative w-20 h-20",children:[(0,r.jsx)(d,{value:m,styles:function(e){var t=e.rotation,s=e.strokeLinecap,r=e.textColor,a=e.textSize,n=e.pathColor,i=e.pathTransition,l=e.pathTransitionDuration,o=e.trailColor,c=e.backgroundColor,d=null==t?void 0:"rotate("+t+"turn)",h=null==t?void 0:"center center";return{root:{},path:u({stroke:n,strokeLinecap:s,transform:d,transformOrigin:h,transition:i,transitionDuration:null==l?void 0:l+"s"}),trail:u({stroke:o,strokeLinecap:s,transform:d,transformOrigin:h}),text:u({fill:r,fontSize:a}),background:u({fill:c})}}({strokeLinecap:"round",textSize:"14px",pathColor:"#311687",textColor:"#000000",trailColor:"#d1d5db"})}),(0,r.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs text-gray-800 leading-tight",children:"Distance"===i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-base",children:"".concat(a.toFixed(1),"km")}),(0,r.jsx)("span",{className:"text-sm",children:"/ ".concat(n,"km")})]}):(0,r.jsx)("span",{className:"text-base",children:"".concat(a,"/").concat(n)})})]}),(0,r.jsxs)("div",{className:"mt-2 text-white text-xs font-bold px-2 py-1 rounded ".concat(c?"bg-customViolet":"bg-gray-300"),children:[l," poeng"]})]})]})};var p=s(7644),m=s(3784),x=s(4842);let f=()=>{let e=(0,n.useRouter)(),{userData:t}=(0,i.r)(),{data:s,isLoading:o,error:c,mutate:d}=(0,m.g)("/api/challenge/current/user",null==t?void 0:t.accessToken,{refreshInterval:3e4,enabled:!!(null==t?void 0:t.accessToken)}),[u,f]=(0,a.useState)(null),[g,b]=(0,a.useState)(!1),[k,y]=(0,a.useState)(null),j=async e=>{f(e);let s=await fetch("https://kortreistapi-h7e9d7gsb3bcgwhd.norwayeast-01.azurewebsites.net/api/challenge/custom/complete",{method:"POST",headers:{Authorization:"Bearer ".concat(null==t?void 0:t.accessToken),"Content-Type":"application/json"},body:JSON.stringify({challengeId:e})});if(s.ok||console.log("Error completing custom challenge:",s),!s.ok)return(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});await d(),f(null)};return o?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)(p.A,{})}):c?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})}):(0,r.jsxs)("div",{className:"flex flex-col items-center p-4 gap-4",children:[(0,r.jsx)("header",{className:"self-start",children:(0,r.jsx)(l.A,{onClick:()=>e.back()})}),(0,r.jsx)("div",{className:"flex justify-center w-full font-bold text-3xl text-violet-950 pb-6",children:"Ukens utfordringer"}),null==s?void 0:s.map(e=>(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(h,{title:e.description,type:e.method,current:Math.min(e.userProgress,"Distance"===e.type?e.requiredDistanceKm:e.requiredCount),total:"Distance"===e.type?e.requiredDistanceKm:e.requiredCount,challengeType:e.type,challengePoints:e.points,isCustom:"custom"===e.method,isCompleted:"Distance"===e.type?e.userProgress>=e.requiredDistanceKm:e.userProgress>=e.requiredCount,isLoading:u===e.challengeId,onComplete:()=>y(e.challengeId)})},e.challengeId)),(0,r.jsxs)("button",{className:"w-32 h-10 bg-customViolet text-white font-semibold rounded shadow-lg transition-colors flex items-center justify-center",onClick:()=>b(e=>!e),children:[(0,r.jsx)("span",{children:"Se detaljer"}),(0,r.jsx)("span",{className:"ml-2",children:g?"▲":"▼"})]}),g&&(0,r.jsxs)("div",{className:"bg-customYellow2 opacity-90 text-customViolet text-base md:text-lg p-3 rounded-lg border border-customViolet w-full text-left",children:[(0,r.jsx)("p",{className:"mb-1 font-semibold",children:"Hva betyr fargene?"}),(0,r.jsxs)("ul",{className:"text-sm list-disc list-outside pl-6 space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"text-orange-500 font-medium",children:"Oransje ramme"}),": Spesialutfordring - m\xe5 fullf\xf8res manuelt."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"text-blue-700 font-medium",children:"Bl\xe5 ramme"}),": Standardutfordring - spores automatisk."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"text-green-500 font-medium",children:"Gr\xf8nn ramme"}),": Avstandsutfordring - spores automatisk basert p\xe5 kilometer."]})]})]}),null!==k&&(0,r.jsx)(x.A,{message:"Er du sikker p\xe5 at du vil fullf\xf8re denne aktiviteten?",onConfirm:()=>{j(k),y(null)},onCancel:()=>y(null),confirmColor:"green"})]})}},6620:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges",function(){return s(6309)}])},6955:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(7876);let a=(0,s(1713).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),n=e=>{let{icon:t=(0,r.jsx)(a,{size:24}),onClick:s}=e;return(0,r.jsx)("button",{onClick:s,className:"flex items-center",children:t})}},7116:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[596,636,593,792],()=>t(6620)),_N_E=e.O()}]);