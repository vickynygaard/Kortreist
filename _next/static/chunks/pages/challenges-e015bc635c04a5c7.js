(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{5577:(e,t,r)=>{"use strict";r.d(t,{g:()=>l});var a=r(6768),s=r(9099),n=r.n(s),o=r(7685);async function i(e,t){let r={"Content-Type":"application/json"};t&&(r.Authorization="Bearer ".concat(t));let a=await fetch("".concat("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net").concat(e),{headers:r});if(!a.ok){if(428===a.status){o.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),n().push("/onboarding");return}let e=await a.text();throw Error("Error: ".concat(a.statusText," - ").concat(e))}return a.json()}function l(e,t,r){let s=e&&t?[e,t]:null,{data:n,error:o,mutate:l}=(0,a.Ay)(s,s?()=>i(e,t):null,r);return{data:n,isLoading:!n&&!o,error:o,mutate:l}}},6309:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(7876),s=r(4232),n=r(9099),o=r(300),i=r(6955),l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function c(e){var t,r,a,n,o,i,l,c,u=e.className,d=e.counterClockwise,h=e.dashRatio,p=e.pathRadius,f=e.strokeWidth,x=e.style;return(0,s.createElement)("path",{className:u,style:Object.assign({},x,(r=(t={pathRadius:p,dashRatio:h,counterClockwise:d}).counterClockwise,a=t.dashRatio,o=(1-a)*(n=2*Math.PI*t.pathRadius),{strokeDasharray:n+"px "+n+"px",strokeDashoffset:(r?-o:o)+"px"})),d:(l=(i={pathRadius:p,counterClockwise:d}).pathRadius,"\n      M 50,50\n      m 0,-"+l+"\n      a "+l+","+l+" "+(c=+!!i.counterClockwise)+" 1 1 0,"+2*l+"\n      a "+l+","+l+" "+c+" 1 1 0,-"+2*l+"\n    "),strokeWidth:f,fillOpacity:0})}var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return!function(e,t){function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,r=e.minValue,a=e.maxValue;return(Math.min(Math.max(t,r),a)-r)/(a-r)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,r=e.className,a=e.classes,n=e.counterClockwise,o=e.styles,i=e.strokeWidth,l=e.text,u=this.getPathRadius(),d=this.getPathRatio();return(0,s.createElement)("svg",{className:a.root+" "+r,style:o.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,s.createElement)("circle",{className:a.background,style:o.background,cx:50,cy:50,r:50}):null,(0,s.createElement)(c,{className:a.trail,counterClockwise:n,dashRatio:t,pathRadius:u,strokeWidth:i,style:o.trail}),(0,s.createElement)(c,{className:a.path,counterClockwise:n,dashRatio:d*t,pathRadius:u,strokeWidth:i,style:o.path}),l?(0,s.createElement)("text",{className:a.text,style:o.text,x:50,y:50},l):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(s.Component);function d(e){return Object.keys(e).forEach(function(t){null==e[t]&&delete e[t]}),e}r(7116);let h=e=>{let{title:t,type:r,current:s,total:n,challengeType:o}=e,i=Math.min(s/n*100,100),l=s>=n,c="Distance"===o?"".concat(s.toFixed(1)," km\n/ ").concat(n," km"):"".concat(s,"/").concat(n);return(0,a.jsxs)("div",{className:"grid bg-customYellow2 w-full max-h-40 grid-cols-3 grid-rows-2 gap-2 rounded-xl border-2 border-violet-900 p-4",children:[(0,a.jsx)("div",{className:"col-span-2 self-start font-mono font-bold text-lg p-2",children:t}),(0,a.jsx)("div",{className:"row-span-2 flex items-center justify-center pl-4",children:(0,a.jsx)("div",{className:"w-flex max-h-32 max-w-32 font-mono",children:(0,a.jsxs)("div",{className:"relative w-28 h-28",children:[(0,a.jsx)(u,{value:i,styles:function(e){var t=e.rotation,r=e.strokeLinecap,a=e.textColor,s=e.textSize,n=e.pathColor,o=e.pathTransition,i=e.pathTransitionDuration,l=e.trailColor,c=e.backgroundColor,u=null==t?void 0:"rotate("+t+"turn)",h=null==t?void 0:"center center";return{root:{},path:d({stroke:n,strokeLinecap:r,transform:u,transformOrigin:h,transition:o,transitionDuration:null==i?void 0:i+"s"}),trail:d({stroke:l,strokeLinecap:r,transform:u,transformOrigin:h}),text:d({fill:a,fontSize:s}),background:d({fill:c})}}({strokeLinecap:"round",textSize:"14px",pathColor:"#2F0D68",textColor:"#1f2937",trailColor:"#d1d5db"})}),(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-mono text-gray-800 leading-tight",children:"Distance"===o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg",children:"".concat(s.toFixed(1),"km")}),(0,a.jsx)("span",{className:"text-base",children:"/ ".concat(n,"km")})]}):(0,a.jsx)("span",{className:"text-base",children:"".concat(s,"/").concat(n)})})]})})}),(0,a.jsxs)("div",{className:"col-span-2 self-start flex flex-col pl-4",children:[(0,a.jsx)("div",{className:"font-mono",children:(0,a.jsx)("strong",{children:c})}),(0,a.jsx)("div",{children:l?"Fullf\xf8rt":"P\xe5g\xe5r"})]})]})};var p=r(7644),f=r(5577);let x=()=>{let e=(0,n.useRouter)(),{userData:t}=(0,o.r)(),{data:r,isLoading:l,error:c,mutate:u}=(0,f.g)((null==t?void 0:t.accessToken)?"/api/challenge/current/user":null,null==t?void 0:t.accessToken,{refreshInterval:3e4}),[d,x]=(0,s.useState)(null),m=async e=>{x(e);let r=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/custom/complete",{method:"POST",headers:{Authorization:"Bearer ".concat(null==t?void 0:t.accessToken),"Content-Type":"application/json"},body:JSON.stringify({challengeId:e})});if(r.ok||console.log("Error completing custom challenge:",r),!r.ok)return(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});await u(),x(null)};return l?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)(p.A,{})}):c?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})}):(0,a.jsxs)("div",{className:"flex flex-col items-center p-4 gap-4",children:[(0,a.jsx)("header",{className:"self-start",children:(0,a.jsx)(i.A,{onClick:()=>e.back()})}),(0,a.jsx)("div",{className:"flex justify-center w-full font-bold font-mono text-3xl text-violet-950 pb-6",children:"Ukens utfordringer"}),null==r?void 0:r.map(e=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(h,{title:e.description,type:e.method,current:Math.min(e.userProgress,"Distance"===e.type?e.requiredDistanceKm:e.requiredCount),total:"Distance"===e.type?e.requiredDistanceKm:e.requiredCount,challengeType:e.type}),"custom"===e.method&&void 0!==e.requiredCount&&e.userProgress<e.requiredCount&&(0,a.jsx)("button",{disabled:d===e.challengeId,className:"mt-2 px-4 py-2 rounded bg-violet-700 text-white hover:bg-violet-800",onClick:()=>m(e.challengeId),children:d===e.challengeId?"Registrerer...":"Fullf\xf8r aktivitet"})]},e.challengeId))]})}},6620:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges",function(){return r(6309)}])},6955:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(7876);let s=(0,r(1713).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),n=e=>{let{icon:t=(0,a.jsx)(s,{size:24}),onClick:r}=e;return(0,a.jsx)("button",{onClick:r,className:"flex items-center",children:t})}},7116:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[768,636,593,792],()=>t(6620)),_N_E=e.O()}]);