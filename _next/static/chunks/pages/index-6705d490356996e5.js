(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{300:(e,s,t)=>{"use strict";t.d(s,{r:()=>n});var r=t(4232),i=t(5051),a=t(4723),l=t(7526);let n=()=>{let{instance:e,accounts:s}=(0,i.dk)(),[t,n]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),f=async s=>{try{var t;let r=await e.acquireTokenSilent({scopes:a.$.scopes,account:s}),i=r.idTokenClaims,l={email:(null===(t=i.emails)||void 0===t?void 0:t[0])||i.email||i.preferred_username||"",name:i.name||"".concat(i.given_name||""," ").concat(i.family_name||"").trim()||"Unknown User",idTokenClaims:i,idToken:r.idToken,accessToken:r.accessToken};n(l)}catch(s){if(s instanceof l.CB)try{await e.loginRedirect(a.$)}catch(e){u("Login required: "+e)}else u("Failed to acquire token: "+s)}};return(0,r.useEffect)(()=>{(async()=>{try{let t;await e.initialize(),await e.handleRedirectPromise()?t=e.getAllAccounts()[0]:s.length>0&&(t=s[0]),t&&await f(t)}catch(e){u("MSAL initialization error: "+e)}finally{o(!1)}})()},[e]),{userData:t,loading:c,error:d}}},4277:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(7876),i=t(4587),a=t.n(i);let l=(0,t(1713).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var n=t(9099);let c=e=>{let{href:s,image:t,title:i,description:c}=e,o=(0,n.useRouter)();return(0,r.jsxs)("button",{onClick:()=>o.push(s),className:"grid grid-cols-5 grid-rows-2 h-24 w-full rounded-2xl bg-customYellow2 border-2 border-violet-900 gap-2  focus:ring focus:ring-violet-600",children:[(0,r.jsxs)("div",{className:"col-span-4 row-span-2 grid grid-cols-3 grid-rows-4 py-2",children:[(0,r.jsx)("div",{className:"row-span-4 flex items-center justify-center",children:(0,r.jsx)(a(),{src:t,alt:i,width:64,height:64})}),(0,r.jsx)("div",{className:"col-span-2 row-span-2 flex items-center justify-start text-xl font-bold truncate",children:i}),(0,r.jsx)("div",{className:"col-span-2 row-span-2 flex items-center justify-start text-sm text-left",children:c})]}),(0,r.jsx)("div",{className:"row-span-2 flex items-center justify-center",children:(0,r.jsx)(l,{size:24,strokeWidth:2})})]})},o=e=>{let{profilePic:s,name:t,points:i}=e;return(0,r.jsxs)("div",{className:"grid grid-rows-5 w-full gap-2",children:[(0,r.jsxs)("div",{className:"row-span-3 grid grid-cols-5 gap-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:(0,r.jsx)(a(),{src:s,alt:"Profilbilde",width:64,height:64,objectFit:"cover"})})}),(0,r.jsxs)("div",{className:"col-span-4 flex items-center justify-start text-2xl font-semibold",children:["Hei, ",(0,r.jsx)("br",{}),t,"!"]})]}),(0,r.jsx)("div",{className:"row-span-2 flex items-center justify-start text-lg",children:(0,r.jsxs)("p",{children:["Du har samlet inn ",(0,r.jsxs)("strong",{children:[i," poeng"]})," ",(0,r.jsx)("br",{}),"St\xe5 p\xe5!"]})})]})};var d=t(2694),u=t(300),f=t(4232);let h=()=>{var e,s,t;let[i,a]=(0,f.useState)(null),{userData:l}=(0,u.r)();return((0,f.useEffect)(()=>{(async()=>{if(null==l?void 0:l.accessToken)try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/getUser",{headers:{Authorization:"Bearer ".concat(l.accessToken)}});if(!e.ok)throw Error("Serverfeil: ".concat(e.statusText));let s=await e.json();console.log("✅ Brukerdata hentet:",s),a(s)}catch(e){console.error("❌ Feil ved henting av brukerdata:",e)}})()},[null==l?void 0:l.accessToken]),i)?(0,r.jsxs)("div",{className:"flex flex-col w-full justify-between",children:[(0,r.jsxs)("main",{className:"flex flex-col w-full gap-4 p-4",children:[(0,r.jsx)(o,{profilePic:"".concat("/Kortreist","/images/Ikon.png"),name:null!==(s=i.name)&&void 0!==s?s:"Bruker",points:null!==(t=null===(e=i.totalScore)||void 0===e?void 0:e.toString())&&void 0!==t?t:"0"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 pt-4",children:[(0,r.jsx)(c,{href:"travelForm",image:"images/RegistrerReise.svg",title:"Registrer reise",description:"Samle poeng for \xe5 reise b\xe6rekraftig til jobb"}),(0,r.jsx)(c,{href:"/team",image:"images/RegistrerReise.svg",title:"Ditt lag",description:"Se lagstatistikk, medlemmer..."}),(0,r.jsx)(c,{href:"travelForm.tsx",image:"images/RegistrerReise.svg",title:"Ukens utfordringer",description:"Fullf\xf8r utfordringer for \xe5 samle poeng"})]})]}),(0,r.jsx)(d.A,{})]}):(0,r.jsx)("div",{children:"Laster brukerdata..."})}},6760:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4277)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(6760)),_N_E=e.O()}]);