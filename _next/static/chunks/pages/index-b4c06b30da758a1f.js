(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2282:(e,t,r)=>{"use strict";r.d(t,{O:()=>l});var s=r(4232),a=r(9099),i=r(300);function l(){let e=(0,a.useRouter)(),{userData:t}=(0,i.r)();(0,s.useEffect)(()=>{if(!(null==t?void 0:t.accessToken))return;let r=e.pathname,s=["/","/profile","/team","/leaderboard"];"/profile"===r&&s.push("/profile/settings"),"/leaderboard"===r&&s.push("/leaderboard/company","/leaderboard/team"),"/"===r&&s.push("/travelForm","/challenges"),r.startsWith("/team")&&("/team"===r&&s.push("/team/dashboard","/team/onboarding"),"/team/dashboard"===r&&s.push("/team/onboarding"),"/team/onboarding"===r&&s.push("/team/dashboard")),s.filter(e=>e!==r).forEach(t=>e.prefetch(t))},[e.pathname,null==t?void 0:t.accessToken])}},3784:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var s=r(7596),a=r(9099),i=r.n(a),l=r(7685);async function n(e,t){let r={"Content-Type":"application/json"};t&&(r.Authorization="Bearer ".concat(t));let s=await fetch("".concat("https://kortreistapi-h7e9d7gsb3bcgwhd.norwayeast-01.azurewebsites.net").concat(e),{headers:r});if(!s.ok){if(428===s.status){l.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),i().push("/onboarding");return}let e=await s.text();throw Error("Error: ".concat(s.statusText," - ").concat(e))}return s.json()}function o(e,t,r){var a;let i=(null===(a=null==r?void 0:r.enabled)||void 0===a||a)&&e&&t?[e,t]:null,{data:l,error:o,mutate:c}=(0,s.Ay)(i,()=>n(e,t),r);return{data:l,isLoading:!l&&!o,error:o,mutate:c}}},4277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(7876),a=r(4587),i=r.n(a);let l=(0,r(1713).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var n=r(9099);let o=e=>{let{href:t,image:r,title:a,description:o}=e,c=(0,n.useRouter)();return(0,s.jsxs)("button",{onClick:()=>c.push(t),className:"grid grid-cols-5 grid-rows-2 h-24 w-full rounded-2xl bg-customYellow2 border-2 border-violet-900 gap-2  focus:ring focus:ring-violet-600",children:[(0,s.jsxs)("div",{className:"col-span-4 row-span-2 grid grid-cols-3 grid-rows-4 py-2 pb-4",children:[(0,s.jsx)("div",{className:"row-span-4 flex items-center justify-center",children:(0,s.jsx)(i(),{src:r,alt:a,width:64,height:64})}),(0,s.jsx)("div",{className:"col-span-2 row-span-2 flex items-center justify-start text-xl font-bold truncate",children:a}),(0,s.jsx)("div",{className:"col-span-2 row-span-2 flex items-center justify-start text-sm text-left",children:o})]}),(0,s.jsx)("div",{className:"row-span-2 flex items-center justify-center self-center justify-self-center",children:(0,s.jsx)(l,{size:24,strokeWidth:2})})]})},c=e=>{let{profilePic:t,name:r,points:a}=e;return(0,s.jsxs)("div",{className:"grid grid-rows-5 w-full gap-2",children:[(0,s.jsxs)("div",{className:"row-span-3 grid grid-cols-5 gap-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:(0,s.jsx)(i(),{src:t,alt:"Profilbilde",width:64,height:64,objectFit:"cover"})})}),(0,s.jsxs)("div",{className:"col-span-4 flex items-center justify-start text-2xl font-semibold",children:["Hei, ",(0,s.jsx)("br",{}),r,"!"]})]}),(0,s.jsx)("div",{className:"row-span-2 flex items-center justify-start text-lg",children:(0,s.jsxs)("p",{children:["Du har samlet inn ",(0,s.jsxs)("strong",{children:[a," poeng"]})," ",(0,s.jsx)("br",{}),"St\xe5 p\xe5!"]})})]})};var d=r(300),u=r(7644),f=r(3784),h=r(4232),m=r(2282),g=r(2142);let p=()=>{var e,t,r;let a;let{userData:i}=(0,d.r)();(0,m.O)();{let e=localStorage.getItem("indexData");if(e)try{a=JSON.parse(e)}catch(e){console.error("Failed to parse cached index data:",e)}}let{data:l,isLoading:n,error:p}=(0,f.g)("/api/Profile/getUser",null==i?void 0:i.accessToken,{fallbackData:a,refreshInterval:3e4,enabled:!!(null==i?void 0:i.accessToken)});(0,h.useEffect)(()=>{l&&localStorage.setItem("indexData",JSON.stringify(l))},[l]);let x=(0,g.o)();return n&&x?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(u.A,{})}):p?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})}):(0,s.jsx)("div",{className:"flex flex-col w-full justify-between",children:(0,s.jsxs)("main",{className:"flex flex-col w-full gap-4 p-4",children:[(0,s.jsx)(c,{profilePic:"".concat("/Kortreist","/images/avatars/").concat((null==l?void 0:l.profilePicture)||"Avatar1.png"),name:null!==(t=null==l?void 0:l.name)&&void 0!==t?t:"Bruker",points:null!==(r=null==l?void 0:null===(e=l.totalScore)||void 0===e?void 0:e.toString())&&void 0!==r?r:"0"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 pt-4",children:[(0,s.jsx)(o,{href:"travelForm",image:"".concat("/Kortreist","/images/RegistrerReise.svg"),title:"Registrer reise",description:"Samle poeng for \xe5 reise b\xe6rekraftig til jobb"}),(0,s.jsx)(o,{href:"/team",image:"".concat("/Kortreist","/images/RegistrerReise.svg"),title:"Ditt lag",description:"Se en oversikt over lagstatistikk og medlemmer"}),(0,s.jsx)(o,{href:"challenges",image:"".concat("/Kortreist","/images/RegistrerReise.svg"),title:"Ukens utfordringer",description:"Fullf\xf8r utfordringer for \xe5 samle poeng"})]})]})})}},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4277)}])},7644:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(7876);function a(){return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-customViolet"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[596,636,593,792],()=>t(6760)),_N_E=e.O()}]);