(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{300:(e,t,a)=>{"use strict";a.d(t,{r:()=>c});var s=a(4232),l=a(5051),r=a(4723),n=a(7526);let c=()=>{let{instance:e,accounts:t}=(0,l.dk)(),[a,c]=(0,s.useState)(null),[i,o]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),f=async t=>{try{var a;let s=await e.acquireTokenSilent({scopes:r.$.scopes,account:t}),l=s.idTokenClaims,n={email:(null===(a=l.emails)||void 0===a?void 0:a[0])||l.email||l.preferred_username||"",name:l.name||"".concat(l.given_name||""," ").concat(l.family_name||"").trim()||"Unknown User",idTokenClaims:l,idToken:s.idToken,accessToken:s.accessToken};c(n)}catch(t){if(t instanceof n.CB)try{await e.loginRedirect(r.$)}catch(e){u("Login required: "+e)}else u("Failed to acquire token: "+t)}};return(0,s.useEffect)(()=>{(async()=>{try{let a;await e.initialize(),await e.handleRedirectPromise()?a=e.getAllAccounts()[0]:t.length>0&&(a=t[0]),a&&await f(a)}catch(e){u("MSAL initialization error: "+e)}finally{o(!1)}})()},[e]),{userData:a,loading:i,error:d}}},2948:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(7876),l=a(4232);let r=e=>{let{name:t,score:a,rank:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-end w-24",children:[(0,s.jsx)("span",{className:"mb-2 text-lg font-medium",children:t}),(0,s.jsxs)("div",{className:"".concat({1:"h-32",2:"h-24",3:"h-20"}[l]," w-full flex flex-col items-center bg-violet-900 text-white rounded-t-2xl p-2"),children:[(0,s.jsx)("span",{className:"text-xl font-bold",children:l}),(0,s.jsx)("span",{className:"text-base",children:a})]})]})},n=e=>{let{name:t,score:a,rank:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 px-8 gap-8 border-b border-gray-500",children:[(0,s.jsx)("span",{className:"font-bold",children:l}),(0,s.jsx)("div",{className:"flex items-center gap-4 flex-grow",children:(0,s.jsx)("span",{className:"truncate w-32 overflow-hidden whitespace-nowrap",children:t})}),(0,s.jsx)("span",{className:"",children:a})]})};var c=a(300);let i=()=>{let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)([]),[o,d]=(0,l.useState)([]),{userData:u,loading:f,error:x}=(0,c.r)();(0,l.useEffect)(()=>{(null==u?void 0:u.accessToken)&&(async()=>{let e=[];try{let a=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/users/all",{headers:{Authorization:"Bearer ".concat(u.accessToken)}});if(!a.ok)throw Error("Error fetching users: ".concat(a.statusText));let s=await a.json(),l=[...s].sort((e,t)=>t.totalScore-e.totalScore),r=1;for(let t=0;t<l.length&&e.length<3;t++)t>0&&l[t].totalScore===l[t-1].totalScore?e.push({...l[t],rank:e[e.length-1].rank}):e.push({...l[t],rank:r}),r++;t(e),i(l.slice(e.length)),d(s)}catch(e){console.error("Failed to fetch users:",e)}})()},[null==u?void 0:u.accessToken]);let h=t=>{let a=e.find(e=>e.rank===t);return a?(0,s.jsx)(r,{...a,score:a.totalScore}):null};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-center items-end gap-6 mt-10",children:[h(2),h(1),h(3)]}),(0,s.jsx)("div",{className:"w-full max-h-[400px] overflow-y-auto bg-customYellow rounded-t-lg",children:a.map((t,a)=>(0,s.jsx)(n,{rank:a+e.length+1,name:t.name,score:t.totalScore},t.userId))})]})}},4996:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/leaderboard/company",function(){return a(5992)}])},5992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(7876),l=a(2948),r=a(6733);function n(){return(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsx)("div",{className:"w-full text-center text-2xl font-medium pb-4",children:(0,s.jsx)("h1",{children:"Ledertavle"})}),(0,s.jsx)(r.A,{}),(0,s.jsx)(l.A,{})]})}},6733:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(7876),l=a(9099),r=a(8230),n=a.n(r);let c=e=>{let{href:t,title:a}=e,r=(0,l.useRouter)().pathname===t;return(0,s.jsxs)(n(),{href:t,className:"relative flex flex-col items-center justify-center w-1/3 text-center",children:[r&&(0,s.jsx)("span",{className:"absolute bottom-[-16px] left-1/2 w-full transform -translate-x-1/2 border-b-2 border-violet-900 z-0 transition-all duration-300"}),(0,s.jsx)("span",{className:"".concat(r?"text-violet-900":"text-gray-700"),children:a})]})},i=()=>(0,s.jsx)("nav",{className:"flex w-screen justify-center p-4 font-medium",children:(0,s.jsxs)("div",{className:"flex w-full max-w-md justify-between",children:[(0,s.jsx)(c,{href:"/leaderboard",title:"Solo"}),(0,s.jsx)(c,{href:"/leaderboard/team",title:"Lag"}),(0,s.jsx)(c,{href:"/leaderboard/company",title:"Bedrift"})]})})}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(4996)),_N_E=e.O()}]);