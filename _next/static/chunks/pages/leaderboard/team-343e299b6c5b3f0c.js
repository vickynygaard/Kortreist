(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{300:(e,t,a)=>{"use strict";a.d(t,{r:()=>n});var l=a(4232),s=a(5051),r=a(4723),c=a(7526);let n=()=>{let{instance:e,accounts:t}=(0,s.dk)(),[a,n]=(0,l.useState)(null),[i,o]=(0,l.useState)(!0),[d,u]=(0,l.useState)(null),f=async t=>{try{var a;let l=await e.acquireTokenSilent({scopes:r.$.scopes,account:t}),s=l.idTokenClaims,c={email:(null===(a=s.emails)||void 0===a?void 0:a[0])||s.email||s.preferred_username||"",name:s.name||"".concat(s.given_name||""," ").concat(s.family_name||"").trim()||"Unknown User",idTokenClaims:s,idToken:l.idToken,accessToken:l.accessToken};n(c)}catch(t){if(t instanceof c.CB)try{await e.loginRedirect(r.$)}catch(e){u("Login required: "+e)}else u("Failed to acquire token: "+t)}};return(0,l.useEffect)(()=>{(async()=>{try{let a;await e.initialize(),await e.handleRedirectPromise()?a=e.getAllAccounts()[0]:t.length>0&&(a=t[0]),a&&await f(a)}catch(e){u("MSAL initialization error: "+e)}finally{o(!1)}})()},[e]),{userData:a,loading:i,error:d}}},2948:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(7876),s=a(4232);let r=e=>{let{nickName:t,score:a,rank:s,profilePicture:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-end w-24 relative",children:[(0,l.jsx)("div",{className:"relative -mb-6 z-10",children:(0,l.jsx)("img",{src:"/images/profile-pictures/".concat(r||"avatar1.png"),alt:t,className:"w-16 h-16 rounded-full border-4 ".concat({1:"border-yellow-400",2:"border-gray-300",3:"border-amber-600"}[s]," object-cover bg-white")})}),(0,l.jsxs)("div",{className:"w-full flex flex-col items-center justify-end ".concat({1:"h-32",2:"h-24",3:"h-20"}[s]," bg-violet-900 text-white rounded-t-2xl pt-8 pb-2"),children:[(0,l.jsx)("span",{className:"text-xl font-bold",children:s}),(0,l.jsx)("span",{className:"text-base",children:a})]}),(0,l.jsx)("span",{className:"mt-2 text-center text-sm font-medium",children:t})]})},c=e=>{let{nickName:t,score:a,rank:s,profilePicture:r}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 px-8 gap-4 border-b border-gray-500 bg-customYellow",children:[(0,l.jsx)("span",{className:"font-bold w-6 text-center",children:s}),(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-grow",children:[(0,l.jsx)("img",{src:"/images/profile-pictures/".concat(r||"avatar1.png"),alt:t,className:"w-10 h-10 rounded-full border-2 border-customViolet object-cover"}),(0,l.jsx)("span",{className:"truncate w-32",children:t})]}),(0,l.jsx)("span",{className:"font-semibold text-customViolet",children:a})]})};var n=a(300);let i=()=>{let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),{userData:u,loading:f,error:m}=(0,n.r)();(0,s.useEffect)(()=>{(null==u?void 0:u.accessToken)&&(async()=>{let e=[];try{let a=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/users/all",{headers:{Authorization:"Bearer ".concat(u.accessToken)}});if(!a.ok)throw Error("Error fetching users: ".concat(a.statusText));let l=await a.json();console.log(l);let s=[...l].sort((e,t)=>t.totalScore-e.totalScore),r=1;for(let t=0;t<s.length&&e.length<3;t++)t>0&&s[t].totalScore===s[t-1].totalScore?e.push({...s[t],rank:e[e.length-1].rank}):e.push({...s[t],rank:r}),r++;t(e),i(s.slice(e.length)),d(l),console.log(l)}catch(e){console.error("Failed to fetch users:",e)}})()},[null==u?void 0:u.accessToken]);let x=t=>{let a=e.find(e=>e.rank===t);return a?(0,l.jsx)(r,{...a,score:a.totalScore,profilePicture:a.profilePicture}):null};return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"flex justify-center items-end gap-6 mt-10",children:[x(2),x(1),x(3)]}),(0,l.jsx)("div",{className:"w-full max-h-[400px] overflow-y-auto bg-customYellow rounded-t-lg",children:a.map((t,a)=>(0,l.jsx)(c,{rank:a+e.length+1,nickName:t.nickName,score:t.totalScore,profilePicture:t.profilePicture},t.userId))})]})}},3102:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/leaderboard/team",function(){return a(8888)}])},6733:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(7876),s=a(9099),r=a(8230),c=a.n(r);let n=e=>{let{href:t,title:a}=e,r=(0,s.useRouter)().pathname===t;return(0,l.jsxs)(c(),{href:t,className:"relative flex flex-col items-center justify-center w-1/3 text-center",children:[r&&(0,l.jsx)("span",{className:"absolute bottom-[-16px] left-1/2 w-full transform -translate-x-1/2 border-b-2 border-violet-900 z-0 transition-all duration-300"}),(0,l.jsx)("span",{className:"".concat(r?"text-violet-900":"text-gray-700"),children:a})]})},i=()=>(0,l.jsx)("nav",{className:"flex w-screen justify-center p-4 font-medium",children:(0,l.jsxs)("div",{className:"flex w-full max-w-md justify-between",children:[(0,l.jsx)(n,{href:"/leaderboard",title:"Solo"}),(0,l.jsx)(n,{href:"/leaderboard/team",title:"Lag"}),(0,l.jsx)(n,{href:"/leaderboard/company",title:"Bedrift"})]})})},8888:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var l=a(7876),s=a(2948),r=a(6733);function c(){return(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsx)("div",{className:"w-full text-center text-2xl font-medium pb-4",children:(0,l.jsx)("h1",{children:"Ledertavle"})}),(0,l.jsx)(r.A,{}),(0,l.jsx)(s.A,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3102)),_N_E=e.O()}]);