(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{3102:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/leaderboard/team",function(){return a(8888)}])},3784:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var r=a(7596),l=a(9099),s=a.n(l),n=a(7685);async function o(e,t){let a={"Content-Type":"application/json"};t&&(a.Authorization="Bearer ".concat(t));let r=await fetch("".concat("https://kortreistapi-h7e9d7gsb3bcgwhd.norwayeast-01.azurewebsites.net").concat(e),{headers:a});if(!r.ok){if(428===r.status){n.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),s().push("/onboarding");return}let e=await r.text();throw Error("Error: ".concat(r.statusText," - ").concat(e))}return r.json()}function i(e,t,a){var l;let s=(null===(l=null==a?void 0:a.enabled)||void 0===l||l)&&e&&t?[e,t]:null,{data:n,error:i,mutate:c}=(0,r.Ay)(s,()=>o(e,t),a);return{data:n,isLoading:!n&&!i,error:i,mutate:c}}},4463:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1713).A)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},6733:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(7876),l=a(9099),s=a(8230),n=a.n(s);let o=e=>{let{href:t,title:a}=e,s=(0,l.useRouter)().pathname===t;return(0,r.jsxs)(n(),{href:t,className:"relative flex flex-col items-center justify-center w-1/3 text-center",children:[s&&(0,r.jsx)("span",{className:"absolute bottom-[-16px] left-1/2 w-full transform -translate-x-1/2 border-b-2 border-violet-900 z-0 transition-all duration-300"}),(0,r.jsx)("span",{className:"".concat(s?"text-violet-900":"text-gray-700"),children:a})]})},i=()=>(0,r.jsx)("nav",{className:"flex w-full justify-center p-4 font-medium",children:(0,r.jsxs)("div",{className:"flex w-full max-w-md justify-between",children:[(0,r.jsx)(o,{href:"/leaderboard",title:"Solo"}),(0,r.jsx)(o,{href:"/leaderboard/team",title:"Lag"}),(0,r.jsx)(o,{href:"/leaderboard/company",title:"Bedrift"})]})})},7644:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(7876);function l(){return(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-customViolet"})})}},8646:(e,t,a)=>{"use strict";let r;a.d(t,{A:()=>p});var l=a(7876),s=a(4232),n=a(4463),o=a(3267);let i=e=>{let{nickName:t,score:a,rank:r,profilePicture:s,visualPosition:i,type:c="user"}=e;return(0,l.jsxs)(o.P.div,{className:"flex flex-col items-center justify-end w-24 relative",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1*i,duration:.6,type:"spring",stiffness:100},children:[(0,l.jsxs)("div",{className:"relative -mb-6 z-10",children:[r<=3&&(0,l.jsx)(n.A,{size:20,className:"absolute -top-4 left-1/2 -translate-x-1/2 ".concat(1===r?"text-yellow-500":2===r?"text-gray-300":"text-amber-600"," drop-shadow")}),(0,l.jsx)("img",{src:"".concat("/Kortreist","/images/").concat("team"===c?"team-pictures":"avatars","/").concat(s||("team"===c?"teamAvatar1.png":"Avatar1.png")),alt:t,className:"w-16 h-16 rounded-full border-4 ".concat({1:"border-yellow-400",2:"border-gray-300",3:"border-amber-600"}[r]||"border-gray-200"," object-cover bg-white")})]}),(0,l.jsxs)("div",{className:"w-full flex flex-col items-center justify-end ".concat((e=>1===e?"h-32":2===e?"h-24":3===e?"h-20":"h-16")(r)," bg-violet-900 text-white rounded-t-2xl pt-8 pb-2"),children:[(0,l.jsx)("span",{className:"text-xl font-bold",children:r}),(0,l.jsx)("span",{className:"text-base",children:a.toLocaleString("no-NO")})]}),(0,l.jsx)("div",{className:"mt-2 h-8 w-full px-1 text-center",children:(0,l.jsx)("span",{className:"text-base font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-400 to-violet-600 line-clamp-2 leading-tight break-words",children:t})})]})},c=e=>{let{userId:t,nickName:a,score:r,rank:s,profilePicture:n,type:o="user",isCurrentUser:i=!1}=e;return(0,l.jsxs)("div",{id:i?"user-".concat(t):void 0,className:"flex items-center justify-between p-4 px-8 gap-4 border-b border-gray-500 last:border-b-0 h-[73px] ".concat(i?"bg-gradient-to-t from-yellow-100/40 to-yellow-200/40 ":""),children:[(0,l.jsx)("span",{className:"font-bold w-6 text-center",children:s}),(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:"".concat("/Kortreist","/images/").concat("team"===o?"team-pictures":"avatars","/").concat(n||("team"===o?"teamAvatar1.png":"Avatar1.png")),alt:a,className:"w-10 h-10 min-w-[2.5rem] min-h-[2.5rem] rounded-full border-2 object-cover flex-shrink-0 ".concat(i?"border-customRed":"border-customViolet")}),i&&(0,l.jsx)("span",{className:"absolute -top-1 -left-2 bg-customOrange text-customViolet text-[0.6rem] rounded-full w-4 h-4 flex items-center justify-center",children:"Du"})]}),(0,l.jsx)("div",{className:"h-full w-[24rem] flex items-center",children:(0,l.jsx)("p",{className:i?"break-all max-w-[24rem] max-h-[3.4rem] overflow-hidden font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-400 to-violet-600":"break-all max-w-[24rem] max-h-[3.4rem] overflow-hidden",children:a})})]}),(0,l.jsx)("span",{className:"font-semibold text-customViolet",children:r.toLocaleString("no-NO")})]})};var d=a(300),m=a(3784),u=a(7644),x=a(2142);let f=e=>{let{userId:t,nickName:a,score:r,rank:s,profilePicture:n,type:o="user"}=e;return(0,l.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,l.jsx)("h1",{className:"text-customViolet font-bold text-sm ml-4 mb-1",children:"Din plassering"}),(0,l.jsx)("div",{className:"rounded-lg bg-violet-100 backdrop-blur-sm p-1 shadow-sm border border-gray-300",children:(0,l.jsxs)("div",{className:"flex items-center justify-between h-[60px] px-4 gap-4",children:[(0,l.jsx)("span",{className:"text-sm font-bold text-customViolet w-5 text-center",children:s}),(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-grow min-w-0",children:[(0,l.jsx)("div",{className:"relative flex-shrink-0",children:(0,l.jsx)("img",{src:"".concat("/Kortreist","/images/").concat("team"===o?"team-pictures":"avatars","/").concat(n||("team"===o?"teamAvatar1.png":"Avatar1.png")),alt:a,className:"w-9 h-9 min-w-[2.25rem] rounded-full border-2 border-customViolet object-cover"})}),(0,l.jsx)("p",{className:"line-clamp-2 break-all leading-tight text-sm font-medium text-customViolet max-w-[9rem]",children:a})]}),(0,l.jsx)("span",{className:"text-sm font-semibold text-customViolet",children:r.toLocaleString("no-NO")})]})})]})};{let e=localStorage.getItem("leaderboardData");if(e)try{r=JSON.parse(e)}catch(e){console.error("Failed to parse cached leaderboardData:",e)}}let p=e=>{var t;let{users:a,loadingOverride:n=!1}=e,{userData:o,loading:p}=(0,d.r)(),[h,b]=(0,s.useState)([]),[v,g]=(0,s.useState)([]),[j,N]=(0,s.useState)([]),{data:w,isLoading:y,error:k}=(0,m.g)("/api/users/all",null==o?void 0:o.accessToken,{refreshInterval:3e4,enabled:!!(null==o?void 0:o.accessToken),fallbackData:r}),{data:S,isLoading:A,error:I}=(0,m.g)("/api/profile/getUser",null==o?void 0:o.accessToken,{refreshInterval:0,revalidateOnFocus:!1,revalidateOnMount:!0,enabled:!!(null==o?void 0:o.accessToken)});(0,s.useEffect)(()=>{w&&localStorage.setItem("leaderboardData",JSON.stringify(w))},[w]);let O=null!=a?a:w;(0,s.useEffect)(()=>{if(!O)return;let e=[...O].sort((e,t)=>t.totalScore-e.totalScore),t=[],a=1;for(let r=0;r<e.length;r++)r>0&&e[r].totalScore===e[r-1].totalScore?t.push({...e[r],rank:t[r-1].rank}):t.push({...e[r],rank:a}),a++;N(t),b(t.slice(0,3)),g(t.slice(3))},[O]);let P=(0,x.o)(),T=a?n:p||y||A;if(k||I)return(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});if(T&&P)return(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)(u.A,{})});let L=null==S?void 0:S.userId,_=j.find(e=>e.userId===L);return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"flex justify-center items-end gap-6 mt-10",children:[2,1,3].map(e=>{var t;let a=h[e-1];return a?(0,l.jsx)(i,{rank:a.rank,nickName:a.nickName,score:a.totalScore,profilePicture:a.profilePicture,visualPosition:e,type:null!==(t=a.type)&&void 0!==t?t:"user"},a.userId):null})}),_&&(0,l.jsx)("div",{className:"mt-4 px-8",children:(0,l.jsx)(f,{userId:_.userId,nickName:_.nickName,score:_.totalScore,rank:_.rank,profilePicture:_.profilePicture,type:null!==(t=_.type)&&void 0!==t?t:"user"})}),v.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex mt-4 px-8 justify-between items-center",children:[(0,l.jsx)("h2",{className:"font-bold text-customViolet mb-2",children:"Deltakere"}),(0,l.jsx)("h2",{className:"font-bold text-customViolet mb-2",children:"Poeng"})]}),(0,l.jsx)("div",{className:" w-full rounded-t-lg bg-customYellow2/50 backdrop-blur-md",children:v.map(e=>{var t;return(0,l.jsx)(c,{userId:e.userId,rank:e.rank,nickName:e.nickName,score:e.totalScore,profilePicture:e.profilePicture,type:null!==(t=e.type)&&void 0!==t?t:"user",isCurrentUser:e.userId===L},e.userId)})})]})]})}},8888:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(7876),l=a(3784),s=a(8646),n=a(300),o=a(6733),i=a(4232);let c=()=>{let e;let{userData:t}=(0,n.r)();{let t=localStorage.getItem("teamLeaderboardData");if(t)try{e=JSON.parse(t)}catch(e){console.error("Error parsing cached team leaderboard data:",e)}}let{data:a,isLoading:c,error:d}=(0,l.g)("/api/Team/allTeams",null==t?void 0:t.accessToken,{fallbackData:e,refreshInterval:3e4,revalidateOnMount:!0,enabled:!!(null==t?void 0:t.accessToken)});(0,i.useEffect)(()=>{a&&localStorage.setItem("teamLeaderboardData",JSON.stringify(a))},[a]);let m=null==a?void 0:a.map((e,t)=>{var a;return{userId:e.teamId,nickName:e.name,totalScore:e.teamTotalScore,profilePicture:null!==(a=e.teamProfilePicture)&&void 0!==a?a:"teamAvatar1.png",rank:t+1,type:"team"}});return(0,r.jsxs)("div",{className:"flex flex-col  w-full",children:[(0,r.jsx)("div",{className:"w-full text-center",children:(0,r.jsx)("div",{className:"font-bold text-3xl text-violet-950 pb-6",children:"Toppliste Lag"})}),(0,r.jsx)(o.A,{}),(0,r.jsx)(s.A,{users:m,loadingOverride:c})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[596,267,636,593,792],()=>t(3102)),_N_E=e.O()}]);