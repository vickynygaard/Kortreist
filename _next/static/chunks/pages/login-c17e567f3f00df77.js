(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{6069:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var o=s(7876),l=s(4232),n=s(5051),r=s(4723);let c=e=>{let{onClick:t,icon:s,title:l,description:n,className:r}=e;return(0,o.jsxs)("button",{onClick:t,className:"flex flex-col items-center justify-center border-2 border-violet-900 text-violet-900 px-3 py-2 rounded-md transition ".concat(r),children:[s&&(0,o.jsx)("div",{className:"mb-2",children:s}),(0,o.jsx)("span",{className:"text-lg font-semibold",children:l}),n&&(0,o.jsx)("p",{className:"text-sm opacity-80",children:n})]})};var i=s(4587),a=s.n(i),d=s(9099),u=s(300);let f=()=>{let{userData:e}=(0,u.r)(),{instance:t,accounts:s,inProgress:i}=(0,n.dk)(),[f,x]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1),p=(0,d.useRouter)();(0,l.useEffect)(()=>{(async()=>{if((null==e?void 0:e.accessToken)&&"none"===i&&!h){m(!0);try{let t=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Users/upsert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({})});if(!t.ok)throw Error("Serverfeil: ".concat(t.statusText));let s=await t.json();console.log("User upserted:",s),p.push(s.isProfileComplete?"/":"/onboarding")}catch(e){console.error("âŒ Feil ved oppdatering:",e)}finally{m(!1)}}})()},[null==e?void 0:e.accessToken,i]);let b=async()=>{x(!0);try{await t.loginRedirect({...r.$,prompt:"login"})}catch(e){console.error("Login error:",e)}finally{x(!1)}},g=async()=>{console.log("Create Account button clicked")};return(0,o.jsx)("div",{className:"flex-1 flex flex-col items-center justify-start z-10 pt-20",children:(0,o.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center z-10",children:[(0,o.jsx)(a(),{src:"".concat("/Kortreist","/images/Logo.png"),alt:"Logo",width:120,height:120,className:"mb-4"}),(0,o.jsx)("h1",{className:"text-4xl font-semibold text-customViolet",children:"Kortreist"}),(0,o.jsxs)("div",{className:"flex flex-col gap-4 mt-12",children:[(0,o.jsx)(c,{onClick:b,title:"Logg Inn",className:"border-customViolet text-customViolet bg-white w-60",disabled:f||"none"!==i||h}),(0,o.jsx)(c,{onClick:g,title:"Opprett Konto",className:"border-customViolet text-white bg-customViolet w-60"})]})]})})}},7984:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(6069)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7984)),_N_E=e.O()}]);