(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{3649:(e,l,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(5777)}])},3784:(e,l,t)=>{"use strict";t.d(l,{g:()=>n});var s=t(7596),a=t(9099),r=t.n(a),i=t(7685);async function c(e,l){let t={"Content-Type":"application/json"};l&&(t.Authorization="Bearer ".concat(l));let s=await fetch("".concat("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net").concat(e),{headers:t});if(!s.ok){if(428===s.status){i.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),r().push("/onboarding");return}let e=await s.text();throw Error("Error: ".concat(s.statusText," - ").concat(e))}return s.json()}function n(e,l,t){let a=e&&l?[e,l]:null,{data:r,error:i,mutate:n}=(0,s.Ay)(a,a?()=>c(e,l):null,t);return{data:r,isLoading:!r&&!i,error:i,mutate:n}}},5777:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>N});var s=t(7876),a=t(4232),r=t(8230),i=t.n(r),c=t(1713);let n=(0,c.A)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),o=(0,c.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),d=(0,c.A)("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]),x=(0,c.A)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),u=(0,c.A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),m=(0,c.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var h=t(7396);let f=(0,c.A)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var p=t(6558);let v=(0,c.A)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),y=(0,c.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=(0,c.A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),g=(0,c.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var k=t(300),b=t(3784),w=t(7644);function N(){var e,l,t,r,c,N,A,M;let[z,C]=(0,a.useState)("co2"),[_,P]=(0,a.useState)(null),{userData:S,loading:V}=(0,k.r)(),E=(null==S?void 0:S.accessToken)?"/api/Profile/overview":null,{data:T,isLoading:B,error:L}=(0,b.g)(E,null==S?void 0:S.accessToken,{revalidateOnFocus:!0,revalidateOnMount:!0,revalidateIfStale:!1,refreshInterval:0}),O=V||B||!T;if(L)return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});if(O)return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(w.A,{})});let Y={co2:{value:(null!==(e=null==T?void 0:T.totalCo2Savings)&&void 0!==e?e:0).toFixed(4),unit:"kg",label:"CO₂ spart"},money:{value:Math.floor(null!==(l=null==T?void 0:T.totalMoneySaved)&&void 0!==l?l:0),unit:"kr",label:"Penger spart"}};return h.A,p.A,(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"w-full px-4 flex text-center items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-medium pb-4 text-center",children:"Min Profil"}),(0,s.jsx)(i(),{href:"/profile/settings",className:"text-black",children:(0,s.jsx)(y,{size:28,strokeWidth:2})})]}),(0,s.jsx)("div",{className:"w-full px-4",children:(0,s.jsxs)("div",{className:"w-full bg-customYellow2 p-4 rounded-2xl flex flex-col border-2 border-violet-900",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("img",{src:"".concat("/Kortreist","/images/profile-pictures/").concat((null==T?void 0:T.user.profilePicture)||"avatar1.png"),alt:"Default Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-customViolet"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-lg font-semibold break-all line-clamp-1 max-w-[20rem]",children:null!==(t=null==T?void 0:T.user.nickName)&&void 0!==t?t:"Bruker"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 break-all line-clamp-1 max-w-[14rem]",children:null!==(r=null==T?void 0:T.user.name)&&void 0!==r?r:""})]})]}),(0,s.jsxs)("div",{className:"flex justify-between w-full bg-customViolet rounded-2xl p-3 mt-4 text-gray-600 text-sm",children:[(0,s.jsxs)("div",{className:"flex-1 text-center text-white",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:null!==(c=null==T?void 0:T.user.totalScore)&&void 0!==c?c:0}),(0,s.jsx)("p",{children:"Poeng"})]}),(0,s.jsxs)("div",{className:"flex-1 text-center text-white border-l border-customYellow2",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:null!==(N=null==T?void 0:T.completedChallenges)&&void 0!==N?N:0}),(0,s.jsx)("p",{children:"Utfordringer"})]}),(0,s.jsxs)("div",{className:"flex-1 text-center border-l text-white border-customYellow2",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:null!==(A=null==T?void 0:T.totalTravels)&&void 0!==A?A:0}),(0,s.jsx)("p",{children:"Reiser"})]})]})]})}),(0,s.jsxs)("div",{className:"w-full flex flex-col items-center mt-10 justify-center",children:[(0,s.jsxs)("div",{className:"relative flex items-center justify-center w-36 h-36",children:[(0,s.jsx)("div",{className:"w-full h-full rounded-full border-8 border-customViolet"}),(0,s.jsxs)("div",{className:"absolute flex flex-col items-center justify-center",children:[(0,s.jsxs)("p",{className:"text-xl font-semibold",children:[null!==(M=Y[z].value)&&void 0!==M?M:0," ",Y[z].unit]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:Y[z].label})]})]}),(0,s.jsxs)("div",{className:"flex w-[75%] max-w-xs items-center justify-center space-x-2 bg-customYellow2 rounded-2xl mt-4 p-2 border-2 border-violet-900",children:[(0,s.jsx)("button",{className:"flex-1 py-2 rounded-2xl flex items-center justify-center ".concat("co2"===z?"bg-green-500":"bg-gray-200"),onClick:()=>C("co2"),children:(0,s.jsx)(n,{size:24,className:"".concat("co2"===z?"text-white":"text-green-500")})}),(0,s.jsx)("button",{className:"flex-1 py-2 rounded-2xl flex items-center justify-center ".concat("money"===z?"bg-yellow-500":"bg-gray-200"),onClick:()=>C("money"),children:(0,s.jsx)(j,{size:24,className:"".concat("money"===z?"text-white":"text-yellow-500")})})]})]}),(0,s.jsx)("div",{className:"w-full px-4 mt-10",children:(0,s.jsxs)("div",{className:"bg-customYellow2 p-4 rounded-2xl border-2 border-violet-900",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Badges"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-3 place-items-center sm:grid-cols-5",children:null==T?void 0:T.achievements.map(e=>(0,s.jsx)("button",{className:"w-14 h-14 flex items-center justify-center border rounded-lg cursor-pointer ".concat(null!==e.earnedAt?"bg-customViolet text-white":"bg-white/50 text-gray-700"),onClick:()=>P({id:e.achievementId,name:e.name,description:e.description,progress:e.progress,total:e.total}),children:(0,s.jsx)("span",{className:"flex items-center justify-center w-full h-full",children:function(e){let l={Miljøkriger:(0,s.jsx)(n,{size:24}),Skrittmester:(0,s.jsx)(o,{size:24}),Bussentusiast:(0,s.jsx)(d,{size:24}),Syklist:(0,s.jsx)(x,{size:24}),Samkjøringshelt:(0,s.jsx)(u,{size:24}),"15 Reiser":(0,s.jsx)(m,{size:24}),"Allsidig Reisende":(0,s.jsx)(h.A,{size:24}),Midnattsreisende:(0,s.jsx)(f,{size:24}),Utfordringsmester:(0,s.jsx)(p.A,{size:24}),Prestasjonssamler:(0,s.jsx)(v,{size:24}),default:(0,s.jsx)(p.A,{size:24})};return l[e]||l.default}(e.name)})},e.achievementId))})]})}),_&&(()=>{let e=Math.min(_.progress,_.total),l=e/_.total*100;return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",onClick:()=>P(null),children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center w-80 relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-gray-600",onClick:()=>P(null),children:(0,s.jsx)(g,{size:24})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:_.name}),(0,s.jsx)("p",{className:"text-gray-600",children:_.description}),(0,s.jsx)("div",{className:"w-full bg-gray-300 h-3 rounded-full mt-3",children:(0,s.jsx)("div",{className:"bg-customViolet h-3 rounded-full",style:{width:"".concat(l,"%")}})}),(0,s.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:[e,"/",_.total," ",e>=_.total?"fullf\xf8rt":"p\xe5g\xe5r"]})]})})})()]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[596,636,593,792],()=>l(3649)),_N_E=e.O()}]);