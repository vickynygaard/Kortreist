(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{300:(e,t,s)=>{"use strict";s.d(t,{r:()=>i});var a=s(4232),l=s(5051),r=s(4723),c=s(7526);let i=()=>{let{instance:e,accounts:t}=(0,l.dk)(),[s,i]=(0,a.useState)(null),[o,n]=(0,a.useState)(!0),[d,h]=(0,a.useState)(null),u=async t=>{try{var s;let a=await e.acquireTokenSilent({scopes:r.$.scopes,account:t}),l=a.idTokenClaims,c={email:(null===(s=l.emails)||void 0===s?void 0:s[0])||l.email||l.preferred_username||"",name:l.name||"".concat(l.given_name||""," ").concat(l.family_name||"").trim()||"Unknown User",idTokenClaims:l,idToken:a.idToken,accessToken:a.accessToken};i(c)}catch(t){if(t instanceof c.CB)try{await e.loginRedirect(r.$)}catch(e){h("Login required: "+e)}else h("Failed to acquire token: "+t)}};return(0,a.useEffect)(()=>{(async()=>{try{let s;await e.initialize(),await e.handleRedirectPromise()?s=e.getAllAccounts()[0]:t.length>0&&(s=t[0]),s&&await u(s)}catch(e){h("MSAL initialization error: "+e)}finally{n(!1)}})()},[e]),{userData:s,loading:o,error:d}}},3649:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(5777)}])},5777:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(7876),l=s(4232),r=s(8230),c=s.n(r),i=s(1713);let o=(0,i.A)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),n=(0,i.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),d=(0,i.A)("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]),h=(0,i.A)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),u=(0,i.A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),x=(0,i.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var m=s(7396);let f=(0,i.A)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),g=(0,i.A)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var p=s(6558);let y=(0,i.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=(0,i.A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),k=(0,i.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var v=s(300);function j(){var e,t,s;let[r,i]=(0,l.useState)("co2"),[j,w]=(0,l.useState)(null),{userData:N,loading:z,error:C}=(0,v.r)(),[T,M]=(0,l.useState)(null),[A,E]=(0,l.useState)(null),[S,_]=(0,l.useState)(null),[O,P]=(0,l.useState)(null);(0,l.useEffect)(()=>{(null==N?void 0:N.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/getUser",{headers:{Authorization:"Bearer ".concat(N.accessToken)}});if(!e.ok)throw Error("Feil ved henting av brukerdata: ".concat(e.statusText));let t=await e.json();console.log("✅ Fetched user profile:",t),M(t)}catch(e){console.error("Feil ved henting av brukerdata:",e)}})()},[null==N?void 0:N.accessToken]),(0,l.useEffect)(()=>{(null==N?void 0:N.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/totalCo2",{headers:{Authorization:"Bearer ".concat(N.accessToken)}});if(!e.ok)throw Error("Error fetching CO₂ savings: "+e.statusText);let t=await e.json();E(t.totalCo2Savings)}catch(e){console.error("Failed to fetch CO₂ savings:",e),console.log(N)}})()},[null==N?void 0:N.accessToken]),(0,l.useEffect)(()=>{(null==N?void 0:N.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/totalMoney",{headers:{Authorization:"Bearer ".concat(N.accessToken)}});if(!e.ok)throw Error("Error fetching CO₂ savings: "+e.statusText);let t=await e.json();P(t.totalMoneySaved)}catch(e){console.error("Failed to fetch CO₂ savings:",e),console.log(N)}})()},[null==N?void 0:N.accessToken]),(0,l.useEffect)(()=>{(null==N?void 0:N.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/totalTravels",{headers:{Authorization:"Bearer ".concat(N.accessToken)}});if(!e.ok)throw Error("Error fetching CO₂ savings: "+e.statusText);let t=await e.json();_(t.totalTravels)}catch(e){console.error("Failed to fetch CO₂ savings:",e),console.log(N)}})()},[null==N?void 0:N.accessToken]);let B={co2:{value:A,unit:"kg",label:"CO₂ spart"},money:{value:null!==O?Math.floor(O):0,unit:"kr",label:"Penger spart"}},F=[{id:1,icon:(0,a.jsx)(o,{size:24}),bg:"bg-green-200",name:"Eco Warrior",description:"Use public transport or bike for 10 days.",progress:7,total:10},{id:2,icon:(0,a.jsx)(n,{size:24}),bg:"bg-yellow-200",name:"Step Master",description:"Walk 10,000 steps a day for a week.",progress:4,total:7},{id:3,icon:(0,a.jsx)(d,{size:24}),bg:"bg-gray-300",name:"Bus Rider",description:"Take the bus 20 times.",progress:20,total:20},{id:4,icon:(0,a.jsx)(h,{size:24}),bg:"bg-gray-300",name:"Cyclist",description:"Bike at least 100km in a month.",progress:50,total:100},{id:5,icon:(0,a.jsx)(u,{size:24}),bg:"bg-blue-200",name:"Carpool Hero",description:"Carpool with friends 5 times.",progress:3,total:5},{id:6,icon:(0,a.jsx)(x,{size:24}),bg:"bg-gray-300",name:"15 Rides",description:"Use any transport 15 times.",progress:10,total:15},{id:7,icon:(0,a.jsx)(m.A,{size:24}),bg:"bg-gray-300",name:"Community Star",description:"Help organize a community transport event.",progress:1,total:1},{id:8,icon:(0,a.jsx)(f,{size:24}),bg:"bg-purple-200",name:"Champion",description:"Complete all challenges in a month.",progress:8,total:10},{id:9,icon:(0,a.jsx)(g,{size:24}),bg:"bg-gray-300",name:"Streak Master",description:"Use eco-friendly transport every day for 30 days.",progress:22,total:30},{id:10,icon:(0,a.jsx)(p.A,{size:24}),bg:"bg-gray-300",name:"Achievement Hunter",description:"Complete 5 challenges.",progress:5,total:5}];return(0,a.jsxs)("div",{className:"fixed inset-0 overflow-y-auto bg-customYellow2 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-full px-4 pt-8 p-4 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-2xl md:text-3xl font-semibold",children:"Min Profil"}),(0,a.jsx)(c(),{href:"/settings",className:"text-black",children:(0,a.jsx)(y,{size:28,strokeWidth:2})})]}),(0,a.jsx)("div",{className:"w-full px-4",children:(0,a.jsxs)("div",{className:"w-full bg-customYellow p-4 rounded-lg flex flex-col shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("img",{src:"/images/profile-pictures/".concat((null==T?void 0:T.profilePicture)||"avatar1.png"),alt:"Default Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-customViolet"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:null!==(e=null==T?void 0:T.nickName)&&void 0!==e?e:"Bruker"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:null!==(t=null==T?void 0:T.name)&&void 0!==t?t:""})]})]}),(0,a.jsxs)("div",{className:"flex justify-between w-full bg-customOrange rounded-lg p-3 mt-4 text-gray-600 text-sm",children:[(0,a.jsxs)("div",{className:"flex-1 text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-black",children:null!==(s=null==T?void 0:T.totalScore)&&void 0!==s?s:0}),(0,a.jsx)("p",{children:"Poeng"})]}),(0,a.jsxs)("div",{className:"flex-1 text-center border-l border-customYellow",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-black",children:"10"}),(0,a.jsx)("p",{children:"Utfordringer"})]}),(0,a.jsxs)("div",{className:"flex-1 text-center border-l border-customYellow",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-black",children:S}),(0,a.jsx)("p",{children:"Reiser"})]})]})]})}),(0,a.jsxs)("div",{className:"w-full flex flex-col items-center mt-10 flex-1 justify-center",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-center w-36 h-36",children:[(0,a.jsx)("div",{className:"w-full h-full rounded-full border-8 border-customViolet"}),(0,a.jsxs)("div",{className:"absolute flex flex-col items-center justify-center",children:[(0,a.jsxs)("p",{className:"text-xl font-semibold",children:[B[r].value," ",B[r].unit]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:B[r].label})]})]}),(0,a.jsxs)("div",{className:"flex w-[75%] max-w-xs justify-between bg-customYellow rounded-lg mt-4 p-2",children:[(0,a.jsx)("button",{className:"flex-1 py-2 rounded-md flex items-center justify-center ".concat("co2"===r?"bg-customOrange text-white":"text-gray-700"),onClick:()=>i("co2"),children:(0,a.jsx)(o,{size:24,className:"block"})}),(0,a.jsx)("button",{className:"flex-1 py-2 rounded-md flex items-center justify-center ".concat("money"===r?"bg-customOrange text-white":"text-gray-700"),onClick:()=>i("money"),children:(0,a.jsx)(b,{size:24,className:"block"})})]})]}),(0,a.jsxs)("div",{className:"w-full px-4 mt-6 mb-20",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Badges"}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-3",children:F.map(e=>(0,a.jsx)("button",{className:"w-14 h-14 flex items-center justify-center rounded-lg cursor-pointer ".concat(e.progress>=e.total?"bg-customViolet text-white":"bg-gray-300 text-gray-600"),onClick:()=>w(e),children:e.icon},e.id))})]}),j&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center w-80 relative",children:[(0,a.jsx)("button",{className:"absolute top-4 right-4 text-gray-600",onClick:()=>w(null),children:(0,a.jsx)(k,{size:24})}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:j.name}),(0,a.jsx)("p",{className:"text-gray-600",children:j.description}),(0,a.jsx)("div",{className:"w-full bg-gray-300 h-3 rounded-full mt-3",children:(0,a.jsx)("div",{className:"bg-customViolet h-3 rounded-full",style:{width:"".concat(j.progress/j.total*100,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:[j.progress,"/",j.total," completed"]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3649)),_N_E=e.O()}]);