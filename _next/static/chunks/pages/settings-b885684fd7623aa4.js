(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{300:(e,t,s)=>{"use strict";s.d(t,{r:()=>i});var a=s(4232),n=s(5051),l=s(4723),r=s(7526);let i=()=>{let{instance:e,accounts:t}=(0,n.dk)(),[s,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null),u=async t=>{try{var s;let a=await e.acquireTokenSilent({scopes:l.$.scopes,account:t}),n=a.idTokenClaims,r={email:(null===(s=n.emails)||void 0===s?void 0:s[0])||n.email||n.preferred_username||"",name:n.name||"".concat(n.given_name||""," ").concat(n.family_name||"").trim()||"Unknown User",idTokenClaims:n,idToken:a.idToken,accessToken:a.accessToken};i(r)}catch(t){if(t instanceof r.CB)try{await e.loginRedirect(l.$)}catch(e){m("Login required: "+e)}else m("Failed to acquire token: "+t)}};return(0,a.useEffect)(()=>{(async()=>{try{let s;await e.initialize(),await e.handleRedirectPromise()?s=e.getAllAccounts()[0]:t.length>0&&(s=t[0]),s&&await u(s)}catch(e){m("MSAL initialization error: "+e)}finally{c(!1)}})()},[e]),{userData:s,loading:o,error:d}}},507:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(7876),n=s(4232),l=s(9099);let r=(0,s(1713).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var i=s(5051),o=s(300);function c(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[m,u]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null),{userData:g,loading:h,error:p}=(0,o.r)(),[b,w]=(0,n.useState)("");(0,n.useEffect)(()=>{(null==g?void 0:g.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/getUser",{headers:{Authorization:"Bearer ".concat(g.accessToken)}});if(!e.ok)throw Error("Feil ved henting av brukerdata: ".concat(e.statusText));let t=await e.json();console.log("✅ Fetched user profile:",t),f(t),w(t.nickName||"")}catch(e){console.error("Feil ved henting av brukerdata:",e)}})()},[null==g?void 0:g.accessToken]);let j=async()=>{if(null==g?void 0:g.accessToken)try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Users/updateProfile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(g.accessToken)},body:JSON.stringify({nickName:b})});if(!e.ok)throw Error("Serverfeil: ".concat(e.statusText));let t=await e.json();console.log("✅ Nickname updated:",t),alert("Kallenavn oppdatert!")}catch(e){console.error("❌ Feil ved oppdatering:",e),alert("Klarte ikke \xe5 oppdatere kallenavn. Pr\xf8v igjen senere.")}},{instance:k}=(0,i.dk)();return(0,a.jsxs)("div",{className:"fixed inset-0 overflow-y-auto bg-customYellow2 p-8 flex flex-col pb-24",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-center mb-6",children:[(0,a.jsx)("button",{onClick:()=>e.push("/profile"),className:"absolute left-0 text-black",children:(0,a.jsx)(r,{size:28,strokeWidth:2})}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-black",children:"Innstillinger"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 mt-2",children:[(0,a.jsx)("img",{src:t||"https://www.w3schools.com/w3images/avatar2.png",alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-customViolet"}),(0,a.jsxs)("label",{className:"cursor-pointer bg-customViolet text-white px-4 py-2 rounded-md text-sm transition",children:["Endre Profilbilde",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&s(URL.createObjectURL(a))},className:"hidden"})]})]}),(0,a.jsxs)("div",{className:"mt-6 w-full max-w-md",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-1",children:"Endre Kallenavn:"}),(0,a.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),className:"w-full max-w-md flex items-center justify-between p-4 bg-white rounded-lg shadow-md"}),(0,a.jsx)("button",{onClick:j,className:"mt-2 px-4 py-2 bg-customViolet text-white rounded-md text-sm font-medium",children:"Lagre kallenavn"})]}),(0,a.jsx)("div",{className:"mt-6 w-full max-w-md flex items-center justify-between p-4 bg-white rounded-lg shadow-md",children:(0,a.jsx)("span",{className:"text-gray-900 text-sm font-semibold",children:"Laginstillinger"})}),(0,a.jsxs)("div",{className:"mt-6 w-full max-w-md flex items-center justify-between p-4 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("span",{className:"text-gray-900 text-sm font-semibold",children:"Varslinger"}),(0,a.jsx)("button",{onClick:()=>d(!c),className:"w-12 h-6 flex items-center rounded-full transition ".concat(c?"bg-green-500":"bg-gray-400"),children:(0,a.jsx)("span",{className:"w-6 h-6 bg-white rounded-full shadow-md transform transition ".concat(c?"translate-x-6":"translate-x-0")})})]}),(0,a.jsxs)("div",{className:"mt-6 w-full max-w-md",children:[(0,a.jsxs)("button",{onClick:()=>u(!m),className:"w-full flex justify-between items-center p-4 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("span",{className:"text-gray-900 text-sm font-semibold",children:"Poengsystem Forklaring"}),(0,a.jsx)("span",{className:"text-gray-500",children:m?"▲":"▼"})]}),m&&(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg mt-2 text-sm text-gray-600",children:["Tjen poeng for hvert b\xe6rekraftige reisevalg:",(0,a.jsx)("br",{}),"- 100 poeng for \xe5 g\xe5",(0,a.jsx)("br",{}),"- 80 poeng for \xe5 sykle",(0,a.jsx)("br",{}),"- 60 poeng for \xe5 ta buss",(0,a.jsx)("br",{}),"- 50 poeng for \xe5 samkj\xf8re",(0,a.jsx)("br",{}),"- 10 poeng for \xe5 kj\xf8re bil",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Lengere distanse gir flere poeng:",(0,a.jsx)("br",{}),"- 0 - 2 km = 20 poeng",(0,a.jsx)("br",{}),"- 2 - 5 km = 50 poeng",(0,a.jsx)("br",{}),"- 5 - 10 km = 80 poeng",(0,a.jsx)("br",{}),"- 10 - 15 km = 100 poeng",(0,a.jsx)("br",{}),"- 15 - 25 km = 150 poeng",(0,a.jsx)("br",{}),"- 25 km + = 200 poeng",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),'Fullf\xf8r utfordringer og opptjen "badges" for \xe5 samle enda flere poeng!']})]}),(0,a.jsx)("button",{onClick:()=>{sessionStorage.removeItem("userUpserted"),k.logoutRedirect()},className:"mt-6 w-full max-w-md py-3 bg-customRed text-white font-semibold rounded-lg shadow-md transition self-center",children:"Logg ut"})]})}},8034:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return s(507)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8034)),_N_E=e.O()}]);