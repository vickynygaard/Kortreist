(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{300:(e,t,a)=>{"use strict";a.d(t,{r:()=>o});var r=a(4232),s=a(5051),n=a(4723),l=a(7526);let o=()=>{let{instance:e,accounts:t}=(0,s.dk)(),[a,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),u=async t=>{try{var a;let r=await e.acquireTokenSilent({scopes:n.$.scopes,account:t}),s=r.idTokenClaims,l={email:(null===(a=s.emails)||void 0===a?void 0:a[0])||s.email||s.preferred_username||"",name:s.name||"".concat(s.given_name||""," ").concat(s.family_name||"").trim()||"Unknown User",idTokenClaims:s,idToken:r.idToken,accessToken:r.accessToken};o(l)}catch(t){if(t instanceof l.CB)try{await e.loginRedirect(n.$)}catch(e){m("Login required: "+e)}else m("Failed to acquire token: "+t)}};return(0,r.useEffect)(()=>{(async()=>{try{let a;await e.initialize(),await e.handleRedirectPromise()?a=e.getAllAccounts()[0]:t.length>0&&(a=t[0]),a&&await u(a)}catch(e){m("MSAL initialization error: "+e)}finally{c(!1)}})()},[e]),{userData:a,loading:i,error:d}}},507:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(7876),s=a(4232),n=a(9099);let l=(0,a(1713).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=a(5051),i=a(300);let c=["avatar1.png","avatar2.png","avatar3.png","avatar4.png","avatar5.png","avatar6.png","avatar7.png","avatar8.png","avatar9.png","avatar10.png","avatar11.png","avatar12.png","avatar13.png","avatar14.png","avatar15.png","avatar16.png"];function d(){let e=(0,n.useRouter)(),{instance:t}=(0,o.dk)(),[a,d]=(0,s.useState)(null),[m,u]=(0,s.useState)(""),[g,f]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),{userData:v,loading:w,error:j}=(0,i.r)();(0,s.useEffect)(()=>{(null==v?void 0:v.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/getUser",{headers:{Authorization:"Bearer ".concat(v.accessToken)}});if(!e.ok)throw Error("Feil ved henting av brukerdata: ".concat(e.statusText));let t=await e.json();console.log("✅ Fetched user profile:",t),u(t.nickName||""),d(t.profilePicture||"")}catch(e){console.error("Feil ved henting av brukerdata:",e)}})()},[null==v?void 0:v.accessToken]);let k=async()=>{if(null==v?void 0:v.accessToken)try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Users/updateProfile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.accessToken)},body:JSON.stringify({nickName:m,profilePicture:a})});if(!e.ok)throw Error("Serverfeil: ".concat(e.statusText));let t=await e.json();console.log("✅ Nickname updated:",t),alert("Kallenavn oppdatert!")}catch(e){console.error("❌ Feil ved oppdatering:",e),alert("Klarte ikke \xe5 oppdatere kallenavn. Pr\xf8v igjen senere.")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-customYellow2 flex justify-center overflow-y-auto",children:[(0,r.jsxs)("div",{className:"w-full max-w-md flex flex-col",children:[(0,r.jsxs)("div",{className:"relative flex items-center justify-center mb-6",children:[(0,r.jsx)("button",{onClick:()=>e.push("/profile"),className:"absolute left-0 text-black",children:(0,r.jsx)(l,{size:28,strokeWidth:2})}),(0,r.jsx)("h1",{className:"text-2xl font-semibold text-black",children:"Innstillinger"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center mt-4",children:[(0,r.jsx)("img",{src:"".concat("/Kortreist","/images/profile-pictures/").concat(a||"avatar1.png"),alt:"Profile",onClick:()=>b(!0),className:"w-24 h-24 rounded-full object-cover border-2 border-customViolet cursor-pointer hover:opacity-80 transition"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Trykk for \xe5 endre bilde"})]}),(0,r.jsxs)("div",{className:"mt-6 w-full max-w-md",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-1",children:"Endre Kallenavn:"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full max-w-md flex items-center justify-between p-4 bg-white rounded-lg shadow-md"}),(0,r.jsx)("button",{onClick:k,className:"mt-2 px-4 py-2 bg-customViolet text-white rounded-md text-sm font-medium",children:"Lagre kallenavn"})]}),(0,r.jsx)("div",{className:"mt-6 w-full max-w-md flex items-center justify-between p-4 bg-white rounded-lg shadow-md",children:(0,r.jsx)("span",{className:"text-gray-900 text-sm font-semibold",children:"Laginstillinger"})}),(0,r.jsxs)("div",{className:"mt-6 w-full max-w-md flex items-center justify-between p-4 bg-white rounded-lg shadow-md",children:[(0,r.jsx)("span",{className:"text-gray-900 text-sm font-semibold",children:"Varslinger"}),(0,r.jsx)("button",{onClick:()=>f(!g),className:"w-12 h-6 flex items-center rounded-full transition ".concat(g?"bg-green-500":"bg-gray-400"),children:(0,r.jsx)("span",{className:"w-6 h-6 bg-white rounded-full shadow-md transform transition ".concat(g?"translate-x-6":"translate-x-0")})})]}),(0,r.jsxs)("div",{className:"mt-6 w-full max-w-md",children:[(0,r.jsxs)("button",{onClick:()=>x(!p),className:"w-full flex justify-between items-center p-4 bg-white rounded-lg shadow-md",children:[(0,r.jsx)("span",{className:"text-gray-900 text-sm font-semibold",children:"Poengsystem Forklaring"}),(0,r.jsx)("span",{className:"text-gray-500",children:p?"▲":"▼"})]}),p&&(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg mt-2 text-sm text-gray-600",children:["Tjen poeng for hvert b\xe6rekraftige reisevalg:",(0,r.jsx)("br",{}),"- 100 poeng for \xe5 g\xe5",(0,r.jsx)("br",{}),"- 80 poeng for \xe5 sykle",(0,r.jsx)("br",{}),"- 60 poeng for \xe5 ta buss",(0,r.jsx)("br",{}),"- 50 poeng for \xe5 samkj\xf8re",(0,r.jsx)("br",{}),"- 10 poeng for \xe5 kj\xf8re bil",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Lengere distanse gir flere poeng:",(0,r.jsx)("br",{}),"- 0 - 2 km = 20 poeng",(0,r.jsx)("br",{}),"- 2 - 5 km = 50 poeng",(0,r.jsx)("br",{}),"- 5 - 10 km = 80 poeng",(0,r.jsx)("br",{}),"- 10 - 15 km = 100 poeng",(0,r.jsx)("br",{}),"- 15 - 25 km = 150 poeng",(0,r.jsx)("br",{}),"- 25 km + = 200 poeng",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),'Fullf\xf8r utfordringer og opptjen "badges" for \xe5 samle enda flere poeng!']})]}),(0,r.jsx)("button",{onClick:()=>{sessionStorage.removeItem("userUpserted"),t.logoutRedirect()},className:"mt-6 w-full max-w-md py-3 bg-customRed text-white font-semibold rounded-lg shadow-md transition self-center",children:"Logg ut"})]}),h&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center px-2 py-4 justify-center",onClick:e=>{e.target===e.currentTarget&&b(!1)},children:(0,r.jsxs)("div",{className:"bg-white no-scrollbar overflow-y-auto overscroll-contain rounded-lg p-6 max-w-md max-h-[70vh] w-full shadow-lg",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-center",children:"Velg et profilbilde"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-4",children:c.map(e=>(0,r.jsx)("img",{src:"".concat("/Kortreist","/images/profile-pictures/").concat(e||"avatar1.png"),alt:e,onClick:()=>{d(e),b(!1)},className:"w-16 h-16 rounded-full cursor-pointer transition border-4 ".concat(a===e?"border-customViolet scale-110":"border-transparent hover:border-gray-400 hover:scale-105")},e))}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"mt-4 w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 rounded",children:"Lukk"})]})})]})}},8034:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return a(507)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8034)),_N_E=e.O()}]);