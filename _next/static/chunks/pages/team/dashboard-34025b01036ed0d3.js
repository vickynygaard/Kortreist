(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{300:(e,t,l)=>{"use strict";l.d(t,{r:()=>r});var s=l(4232),a=l(5051),i=l(4723),c=l(7526);let r=()=>{let{instance:e,accounts:t}=(0,a.dk)(),[l,r]=(0,s.useState)(null),[n,o]=(0,s.useState)(!0),[m,d]=(0,s.useState)(null),x=async t=>{try{var l;let s=await e.acquireTokenSilent({scopes:i.$.scopes,account:t}),a=s.idTokenClaims,c={email:(null===(l=a.emails)||void 0===l?void 0:l[0])||a.email||a.preferred_username||"",name:a.name||"".concat(a.given_name||""," ").concat(a.family_name||"").trim()||"Unknown User",idTokenClaims:a,idToken:s.idToken,accessToken:s.accessToken};r(c)}catch(t){if(t instanceof c.CB)try{await e.loginRedirect(i.$)}catch(e){d("Login required: "+e)}else d("Failed to acquire token: "+t)}};return(0,s.useEffect)(()=>{(async()=>{try{let l;await e.initialize(),await e.handleRedirectPromise()?l=e.getAllAccounts()[0]:t.length>0&&(l=t[0]),l&&await x(l)}catch(e){d("MSAL initialization error: "+e)}finally{o(!1)}})()},[e]),{userData:l,loading:n,error:m}}},8296:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>r});var s=l(7876),a=l(4232);function i(e){let{teamName:t,totalScore:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-semibold text-customViolet mb-2",children:t}),(0,s.jsx)("p",{className:"text-xl text-black font-semibold",children:"Gratulerer, ditt lag har opptjent"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-customViolet mt-2",children:[l," poeng"]})]})}var c=l(300);function r(){let[e,t]=(0,a.useState)("lagstatistikk"),[l,r]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),{userData:m}=(0,c.r)();if((0,a.useEffect)(()=>{(null==m?void 0:m.accessToken)&&(async()=>{try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/myteam",{headers:{Authorization:"Bearer ".concat(m.accessToken)}});if(!e.ok)throw Error("Klarte ikke hente lagdata");let t=await e.json();r(t)}catch(e){console.error("âŒ Feil ved henting av lag:",e)}finally{o(!1)}})()},[null==m?void 0:m.accessToken]),n||!l)return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("p",{children:"Laster lagdata..."})});let d=(null==l?void 0:l.members.map(e=>({id:e.userId,NickName:e.nickName,points:e.totalScore,profilePicture:e.profilePicture})))||[],x=[...d].sort((e,t)=>t.points-e.points).slice(0,3);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"fixed top-0 left-0 w-full bg-customYellow2 z-30 flex justify-center",children:(0,s.jsx)("div",{className:"w-full max-w-xs sm:max-w-md px-4",children:(0,s.jsxs)("div",{className:"flex flex-col h-56",children:[(0,s.jsxs)("div",{className:"flex-none mt-4 border-4 border-customViolet rounded-full p-1",children:[(0,s.jsx)("button",{className:"w-[50%] px-4 py-3 text-center text-lg font-semibold rounded-full transition-all ".concat("lagstatistikk"===e?"bg-customViolet text-white":"text-black"),onClick:()=>t("lagstatistikk"),children:"Lagstatistikk"}),(0,s.jsx)("button",{className:"w-[50%] px-4 py-3 text-center text-lg font-semibold rounded-full transition-all ".concat("medlemmer"===e?"bg-customViolet text-white":"text-black"),onClick:()=>t("medlemmer"),children:"Medlemmer"})]}),(0,s.jsx)("div",{className:"flex-none p-4 border-2 border-violet-900 rounded-2xl text-center mt-4",children:"medlemmer"===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-semibold text-customViolet",children:l.name}),(0,s.jsxs)("p",{className:"mt-2 text-xl text-black font-semibold",children:["Dere er ",d.length," medlemmer"]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i,{teamName:l.name,totalScore:l.teamTotalScore})})})]})})}),(0,s.jsx)("div",{className:"pt-56 w-full max-w-xs sm:max-w-md mx-auto px-4",children:"lagstatistikk"===e?(0,s.jsxs)("main",{className:"flex flex-col gap-6",children:[(0,s.jsx)("p",{className:"text-2xl font-semibold text-customViolet pt-16 text-center",children:"Ukens b\xe6rekraftshelter"}),(0,s.jsx)("div",{className:"flex gap-4 overflow-x-auto px-4",children:x.map(e=>(0,s.jsxs)("div",{className:"flex flex-col bg-customYellow2 items-center border-2 border-violet-900 rounded-2xl p-4 w-32 flex-shrink-0 h-44",children:[(0,s.jsx)("img",{src:"".concat("/Kortreist","/images/profile-pictures/").concat(e.profilePicture||"avatar1.png"),alt:e.NickName,className:"w-14 h-14 rounded-full object-cover border-2 border-customViolet"}),(0,s.jsx)("p",{className:"text-md font-semibold text-black mt-2 text-center leading-tight h-10 flex items-center justify-center",children:e.NickName}),(0,s.jsxs)("div",{className:"mt-auto",children:[(0,s.jsx)("p",{children:"Poeng:"}),(0,s.jsx)("p",{className:"text-lg font-bold text-customViolet",children:e.points})]})]},e.id))})]}):(0,s.jsx)("main",{children:(0,s.jsx)("div",{className:"flex flex-col gap-4 mt-4",children:d.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-customYellow2 border-2 border-violet-900 rounded-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("img",{src:"".concat("/Kortreist","/images/profile-pictures/").concat(e.profilePicture||"avatar1.png"),alt:e.NickName,className:"w-12 h-12 rounded-full object-cover border-2 border-customViolet"}),(0,s.jsx)("p",{className:"text-lg font-medium text-black",children:e.NickName})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Poeng"}),(0,s.jsx)("p",{className:"text-lg font-bold text-customViolet",children:e.points})]})]},e.id))})})})]})}},8540:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/team/dashboard",function(){return l(8296)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8540)),_N_E=e.O()}]);