(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{28:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(7876),r=n(4232);let l=e=>{let{onClick:t,children:n,className:r="",disabled:l=!1,variant:s="primary"}=e,i={primary:"bg-customViolet text-white",secondary:"bg-customGreen text-white"},c=l?"bg-gray-400 text-gray-700 cursor-not-allowed":i[s]||i.primary;return(0,a.jsx)("button",{onClick:t,disabled:l,className:"".concat("py-3 px-4 w-full sm:w-auto flex-grow rounded-md font-medium flex items-center justify-center gap-2 whitespace-nowrap"," ").concat(c," ").concat(r),children:n})},s=(0,n(1713).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function i(e){let{onCreate:t}=e;return(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-lg mx-auto",children:(0,a.jsxs)(l,{onClick:t,variant:"primary",className:"flex-1",children:[(0,a.jsx)(s,{size:20}),"Opprett et lag"]})})}var c=n(724),o=n(9099),d=n.n(o);function u(e){let{teamName:t,setTeamName:n,accessToken:l,onCreateTeam:s,onBack:i}=e,[o,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),x=async()=>{u(!0);try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/upsert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({name:t})});if(!e.ok){if(428===e.status){d().push("/onboarding");return}let t=await e.text();throw Error(t||"Noe gikk galt under oppretting av lag.")}s()}catch(e){return(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})})}finally{u(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col gap-4 mt-4",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>{let t=e.target.value;n(t),h((0,c.y)(t,{maxLength:8,label:"Lagnavn"}))},placeholder:"Skriv inn lagnavn...",className:"p-2 border border-gray-400 rounded-md"}),m&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:m}),(0,a.jsx)("button",{onClick:x,disabled:!t.trim()||o||!!m,className:"py-3 rounded-md text-white font-medium ".concat(!t.trim()||o||m?"bg-gray-400 cursor-not-allowed":"bg-customViolet"),children:o?"Oppretter...":"Opprett lag"}),(0,a.jsx)("button",{onClick:i,className:"text-gray-600 hover:text-black",children:"Tilbake"})]})}function m(e){let{existingTeams:t,accessToken:n,onJoinTeam:l,onBack:s}=e,[i,c]=(0,r.useState)(!1),o=async e=>{c(!0);try{if(!t.find(t=>t.teamId===e))throw Error("Fant ikke valgt lag.");let a=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/join",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({teamId:e})});if(!a.ok){let e=await a.text();throw Error(e||"Kunne ikke bli med i laget.")}l()}catch(e){return(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})})}finally{c(!1)}};return(0,a.jsx)("div",{className:"flex flex-col gap-8 mt-4",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Medlemmer: ",e.memberCount," / 5"]})]}),(0,a.jsx)("button",{onClick:()=>o(e.teamId),disabled:i||e.memberCount>=5,className:"w-full py-2 mt-4 rounded-md text-white font-medium ".concat(!i&&e.memberCount<5?"bg-customGreen hover:bg-green-600":"bg-gray-400 cursor-not-allowed"),children:i?"Bli med...":"Bli med i laget"})]},e.teamId))})}var h=n(300),x=n(3784),f=n(7644);function p(){let[e,t]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),s=(0,o.useRouter)(),{userData:c,loading:d,error:p}=(0,h.r)(),{data:g,isLoading:v,error:b}=(0,x.g)("/api/Team/company",null==c?void 0:c.accessToken,{refreshInterval:3e4,enabled:!!(null==c?void 0:c.accessToken)});if(d||v)return(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)(f.A,{})});if(p||b||!(null==c?void 0:c.accessToken))return(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});let j=()=>{s.replace("/team/dashboard")};return(0,a.jsxs)("main",{className:"flex flex-col items-center px-4",children:[(0,a.jsx)("div",{className:"w-full text-center text-2xl font-medium pb-4",children:(0,a.jsx)("h1",{children:"Velg et Lag"})}),(0,a.jsxs)("div",{className:"w-full max-w-xs sm:max-w-md flex flex-col gap-4 mt-6 text-center",children:[(0,a.jsx)("p",{className:"text-lg sm:text-xl font-medium text-black",children:"Du er ikke medlem av et lag:"}),""===e&&(0,a.jsxs)(a.Fragment,{children:[(null==g?void 0:g.length)===0?(0,a.jsx)("p",{children:"Det finnes ingen lag enn\xe5. Du kan v\xe6re den f\xf8rste til \xe5 lage ett!"}):(0,a.jsx)("p",{children:"Velg et lag \xe5 bli med i, eller opprett ditt eget."}),(0,a.jsx)(i,{onCreate:()=>t("create")})]}),"create"===e&&(0,a.jsx)(u,{teamName:n,setTeamName:l,accessToken:c.accessToken,onCreateTeam:j,onBack:()=>t("")}),(0,a.jsx)(m,{existingTeams:g||[],accessToken:c.accessToken,onJoinTeam:j,onBack:()=>t("")})]})]})}},724:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var a=n(1367),r=n.n(a);function l(e,t){var n,a,l;let s=null!==(n=null==t?void 0:t.minLength)&&void 0!==n?n:3,i=null!==(a=null==t?void 0:t.maxLength)&&void 0!==a?a:15,c=null!==(l=null==t?void 0:t.label)&&void 0!==l?l:"Kallenavn";return e.length<s?"".concat(c," m\xe5 v\xe6re minst ").concat(s," tegn."):e.length>i?"".concat(c," kan ikke v\xe6re lengre enn ").concat(i," tegn."):/^[A-Za-zÆØÅæøå0-9_ ]+$/.test(e)?r().check(e)||r().list().some(t=>e.toLowerCase().includes(t))?"Dette kallenavnet inneholder upassende spr\xe5k.":null:"Kallenavn kan kun inneholde bokstaver, tall, mellomrom og understrek."}},1468:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/team/onboarding",function(){return n(28)}])},3784:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var a=n(7596),r=n(9099),l=n.n(r),s=n(7685);async function i(e,t){let n={"Content-Type":"application/json"};t&&(n.Authorization="Bearer ".concat(t));let a=await fetch("".concat("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net").concat(e),{headers:n});if(!a.ok){if(428===a.status){s.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),l().push("/onboarding");return}let e=await a.text();throw Error("Error: ".concat(a.statusText," - ").concat(e))}return a.json()}function c(e,t,n){var r;let l=(null===(r=null==n?void 0:n.enabled)||void 0===r||r)&&e&&t?[e,t]:null,{data:s,error:c,mutate:o}=(0,a.Ay)(l,()=>i(e,t),n);return{data:s,isLoading:!s&&!c,error:c,mutate:o}}},7644:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(7876);function r(){return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-customViolet"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[596,636,593,792],()=>t(1468)),_N_E=e.O()}]);