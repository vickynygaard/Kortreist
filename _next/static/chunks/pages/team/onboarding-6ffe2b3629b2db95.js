(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{28:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(7876),r=a(4232);let l=e=>{let{onClick:t,children:a,className:r="",disabled:l=!1,variant:s="primary"}=e,i={primary:"bg-customViolet text-white",secondary:"bg-customGreen text-white"},c=l?"bg-gray-400 text-gray-700 cursor-not-allowed":i[s]||i.primary;return(0,n.jsx)("button",{onClick:t,disabled:l,className:"".concat("py-3 px-4 w-full sm:w-auto flex-grow rounded-md font-medium flex items-center justify-center gap-2 whitespace-nowrap"," ").concat(c," ").concat(r),children:a})},s=(0,a(1713).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function i(e){let{onCreate:t}=e;return(0,n.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-lg mx-auto",children:(0,n.jsxs)(l,{onClick:t,variant:"primary",className:"flex-1",children:[(0,n.jsx)(s,{size:20}),"Opprett et lag"]})})}var c=a(9099),o=a.n(c);function d(e){let{teamName:t,setTeamName:a,accessToken:l,onCreateTeam:s,onBack:i}=e,[c,d]=(0,r.useState)(!1),m=async()=>{d(!0);try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/upsert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({name:t})});if(!e.ok){if(428===e.status){o().push("/onboarding");return}let t=await e.text();throw Error(t||"Noe gikk galt under oppretting av lag.")}s()}catch(e){return(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})})}finally{d(!1)}};return(0,n.jsxs)("div",{className:"flex flex-col gap-4 mt-4",children:[(0,n.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"Skriv inn lagnavn...",className:"p-2 border border-gray-400 rounded-md"}),(0,n.jsx)("button",{onClick:m,disabled:!t.trim()||c,className:"py-3 rounded-md text-white font-medium ".concat(t.trim()&&!c?"bg-customViolet":"bg-gray-400 cursor-not-allowed"),children:c?"Oppretter...":"Opprett lag"}),(0,n.jsx)("button",{onClick:i,className:"text-gray-600 hover:text-black",children:"Tilbake"})]})}function m(e){let{existingTeams:t,accessToken:a,onJoinTeam:l,onBack:s}=e,[i,c]=(0,r.useState)(!1),o=async e=>{c(!0);try{if(!t.find(t=>t.teamId===e))throw Error("Fant ikke valgt lag.");let n=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/join",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({teamId:e})});if(!n.ok){let e=await n.text();throw Error(e||"Kunne ikke bli med i laget.")}l()}catch(e){return(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})})}finally{c(!1)}};return(0,n.jsx)("div",{className:"flex flex-col gap-8 mt-4",children:t.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.name}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Medlemmer: ",e.memberCount," / 5"]})]}),(0,n.jsx)("button",{onClick:()=>o(e.teamId),disabled:i||e.memberCount>=5,className:"w-full py-2 mt-4 rounded-md text-white font-medium ".concat(!i&&e.memberCount<5?"bg-customGreen hover:bg-green-600":"bg-gray-400 cursor-not-allowed"),children:i?"Bli med...":"Bli med i laget"})]},e.teamId))})}var u=a(300),x=a(5577),h=a(7644);function f(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),s=(0,c.useRouter)(),{userData:o,loading:f,error:p}=(0,u.r)(),{data:g,isLoading:y,error:j}=(0,x.g)((null==o?void 0:o.accessToken)?"/api/Team/company":null,null==o?void 0:o.accessToken,{refreshInterval:3e4});if(f||y)return(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)(h.A,{})});if(p||j||!(null==o?void 0:o.accessToken))return(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)("p",{children:"Her skjedde det noe galt, pr\xf8v \xe5 laste inn p\xe5 nytt"})});let b=()=>{s.replace("/team/dashboard")};return(0,n.jsxs)("main",{className:"flex flex-col items-center px-4",children:[(0,n.jsx)("div",{className:"w-full text-center text-2xl font-medium pb-4",children:(0,n.jsx)("h1",{children:"Velg et Lag"})}),(0,n.jsxs)("div",{className:"w-full max-w-xs sm:max-w-md flex flex-col gap-4 mt-6 text-center",children:[(0,n.jsx)("p",{className:"text-lg sm:text-xl font-medium text-black",children:"Du er ikke medlem av et lag:"}),""===e&&(0,n.jsxs)(n.Fragment,{children:[(null==g?void 0:g.length)===0?(0,n.jsx)("p",{children:"Det finnes ingen lag enn\xe5. Du kan v\xe6re den f\xf8rste til \xe5 lage ett!"}):(0,n.jsx)("p",{children:"Velg et lag \xe5 bli med i, eller opprett ditt eget."}),(0,n.jsx)(i,{onCreate:()=>t("create")})]}),"create"===e&&(0,n.jsx)(d,{teamName:a,setTeamName:l,accessToken:o.accessToken,onCreateTeam:b,onBack:()=>t("")}),(0,n.jsx)(m,{existingTeams:g||[],accessToken:o.accessToken,onJoinTeam:b,onBack:()=>t("")})]})]})}},1468:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/team/onboarding",function(){return a(28)}])},5577:(e,t,a)=>{"use strict";a.d(t,{g:()=>c});var n=a(6768),r=a(9099),l=a.n(r),s=a(7685);async function i(e,t){let a={"Content-Type":"application/json"};t&&(a.Authorization="Bearer ".concat(t));let n=await fetch("".concat("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net").concat(e),{headers:a});if(!n.ok){if(428===n.status){s.Ay.error("Du m\xe5 fullf\xf8re registreringen f\xf8r du kan fortsette."),l().push("/onboarding");return}let e=await n.text();throw Error("Error: ".concat(n.statusText," - ").concat(e))}return n.json()}function c(e,t,a){let r=e&&t?[e,t]:null,{data:l,error:s,mutate:c}=(0,n.Ay)(r,r?()=>i(e,t):null,a);return{data:l,isLoading:!l&&!s,error:s,mutate:c}}}},e=>{var t=t=>e(e.s=t);e.O(0,[768,636,593,792],()=>t(1468)),_N_E=e.O()}]);